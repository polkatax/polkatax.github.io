import{p as x,q as rt,r as Z,_ as ot,s as ut,v as lt,w as it,x as ke,O as ct,y as dt,n as ft,z as He,f as le,B as te,A as mt,R as _e,C as ht,D as q,m as pt,g as A,h as Pe,i as Ie,J as be,F as K,E as Te,j as Oe,G as de,l as gt,b as J,a as fe}from"./fetch-subscan-chains.c67a68d7.js";import{as as Be,at as Ue,au as vt,c as yt,a as E,h as Ye,b as Ne,g as bt,av as wt,X as ie,r as C,B as Se,D as w,Y as k,H as I,G as b,aw as ne,F as p,af as F,ag as P,Q as Dt,I as T,a0 as O,a8 as ee,E as we,ae as X}from"./index.1d03841b.js";const U=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function Ha(e,t,n){return Object.prototype.toString.call(e)==="[object Date]"&&(n=e.getDate(),t=e.getMonth()+1,e=e.getFullYear()),xt(Me(e,t,n))}function Pa(e,t,n){return Qe(Mt(e,t,n))}function kt(e){return St(e)===0}function _t(e,t){return t<=6?31:t<=11||kt(e)?30:29}function St(e){const t=U.length;let n=U[0],a,s,r,i,o;if(e<n||e>=U[t-1])throw new Error("Invalid Jalaali year "+e);for(o=1;o<t&&(a=U[o],s=a-n,!(e<a));o+=1)n=a;return i=e-n,s-i<6&&(i=i-s+_(s+4,33)*33),r=Y(Y(i+1,33)-1,4),r===-1&&(r=4),r}function Le(e,t){const n=U.length,a=e+621;let s=-14,r=U[0],i,o,u,v,l;if(e<r||e>=U[n-1])throw new Error("Invalid Jalaali year "+e);for(l=1;l<n&&(i=U[l],o=i-r,!(e<i));l+=1)s=s+_(o,33)*8+_(Y(o,33),4),r=i;v=e-r,s=s+_(v,33)*8+_(Y(v,33)+3,4),Y(o,33)===4&&o-v===4&&(s+=1);const d=_(a,4)-_((_(a,100)+1)*3,4)-150,y=20+s-d;return t||(o-v<6&&(v=v-o+_(o+4,33)*33),u=Y(Y(v+1,33)-1,4),u===-1&&(u=4)),{leap:u,gy:a,march:y}}function Mt(e,t,n){const a=Le(e,!0);return Me(a.gy,3,a.march)+(t-1)*31-_(t,7)*(t-7)+n-1}function xt(e){const t=Qe(e).gy;let n=t-621,a,s,r;const i=Le(n,!1),o=Me(t,3,i.march);if(r=e-o,r>=0){if(r<=185)return s=1+_(r,31),a=Y(r,31)+1,{jy:n,jm:s,jd:a};r-=186}else n-=1,r+=179,i.leap===1&&(r+=1);return s=7+_(r,30),a=Y(r,30)+1,{jy:n,jm:s,jd:a}}function Me(e,t,n){let a=_((e+_(t-8,6)+100100)*1461,4)+_(153*Y(t+9,12)+2,5)+n-34840408;return a=a-_(_(e+100100+_(t-8,6),100)*3,4)+752,a}function Qe(e){let t=4*e+139361631;t=t+_(_(4*e+183187720,146097)*3,4)*4-3908;const n=_(Y(t,1461),4)*5+308,a=_(Y(n,153),5)+1,s=Y(_(n,153),12)+1;return{gy:_(t,1461)-100100+_(8-s,6),gm:s,gd:a}}function _(e,t){return~~(e/t)}function Y(e,t){return e-~~(e/t)*t}const Ze=864e5,$t=36e5,De=6e4,ze="YYYY-MM-DDTHH:mm:ss.SSSZ",Tt=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,Ot=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,me={};function Yt(e,t){const n="("+t.days.join("|")+")",a=e+n;if(me[a]!==void 0)return me[a];const s="("+t.daysShort.join("|")+")",r="("+t.months.join("|")+")",i="("+t.monthsShort.join("|")+")",o={};let u=0;const v=e.replace(Ot,d=>{switch(u++,d){case"YY":return o.YY=u,"(-?\\d{1,2})";case"YYYY":return o.YYYY=u,"(-?\\d{1,4})";case"M":return o.M=u,"(\\d{1,2})";case"Mo":return o.M=u++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return o.M=u,"(\\d{2})";case"MMM":return o.MMM=u,i;case"MMMM":return o.MMMM=u,r;case"D":return o.D=u,"(\\d{1,2})";case"Do":return o.D=u++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return o.D=u,"(\\d{2})";case"H":return o.H=u,"(\\d{1,2})";case"HH":return o.H=u,"(\\d{2})";case"h":return o.h=u,"(\\d{1,2})";case"hh":return o.h=u,"(\\d{2})";case"m":return o.m=u,"(\\d{1,2})";case"mm":return o.m=u,"(\\d{2})";case"s":return o.s=u,"(\\d{1,2})";case"ss":return o.s=u,"(\\d{2})";case"S":return o.S=u,"(\\d{1})";case"SS":return o.S=u,"(\\d{2})";case"SSS":return o.S=u,"(\\d{3})";case"A":return o.A=u,"(AM|PM)";case"a":return o.a=u,"(am|pm)";case"aa":return o.aa=u,"(a\\.m\\.|p\\.m\\.)";case"ddd":return s;case"dddd":return n;case"Q":case"d":case"E":return"(\\d{1})";case"do":return u++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return u++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return u++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return o.Z=u,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return o.ZZ=u,"(Z|[+-]\\d{2}\\d{2})";case"X":return o.X=u,"(-?\\d+)";case"x":return o.x=u,"(-?\\d{4,})";default:return u--,d[0]==="["&&(d=d.substring(1,d.length-1)),d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),l={map:o,regex:new RegExp("^"+v)};return me[a]=l,l}function qe(e,t){return e!==void 0?e:t!==void 0?t.date:vt.date}function Ae(e,t=""){const n=e>0?"-":"+",a=Math.abs(e),s=Math.floor(a/60),r=a%60;return n+x(s)+t+x(r)}function Nt(e,t,n){let a=e.getFullYear(),s=e.getMonth();const r=e.getDate();return t.year!==void 0&&(a+=n*t.year,delete t.year),t.month!==void 0&&(s+=n*t.month,delete t.month),e.setDate(1),e.setMonth(2),e.setFullYear(a),e.setMonth(s),e.setDate(Math.min(r,$e(e))),t.date!==void 0&&(e.setDate(e.getDate()+n*t.date),delete t.date),e}function At(e,t,n){const a=t.year!==void 0?t.year:e[`get${n}FullYear`](),s=t.month!==void 0?t.month-1:e[`get${n}Month`](),r=new Date(a,s+1,0).getDate(),i=Math.min(r,t.date!==void 0?t.date:e[`get${n}Date`]());return e[`set${n}Date`](1),e[`set${n}Month`](2),e[`set${n}FullYear`](a),e[`set${n}Month`](s),e[`set${n}Date`](i),delete t.year,delete t.month,delete t.date,e}function xe(e,t,n){const a=Je(t),s=new Date(e),r=a.year!==void 0||a.month!==void 0||a.date!==void 0?Nt(s,a,n):s;for(const i in a){const o=rt(i);r[`set${o}`](r[`get${o}`]()+n*a[i])}return r}function Je(e){const t={...e};return e.years!==void 0&&(t.year=e.years,delete t.years),e.months!==void 0&&(t.month=e.months,delete t.months),e.days!==void 0&&(t.date=e.days,delete t.days),e.day!==void 0&&(t.date=e.day,delete t.day),e.hour!==void 0&&(t.hours=e.hour,delete t.hour),e.minute!==void 0&&(t.minutes=e.minute,delete t.minute),e.second!==void 0&&(t.seconds=e.second,delete t.second),e.millisecond!==void 0&&(t.milliseconds=e.millisecond,delete t.millisecond),t}function Re(e,t,n){const a=Je(t),s=n===!0?"UTC":"",r=new Date(e),i=a.year!==void 0||a.month!==void 0||a.date!==void 0?At(r,a,s):r;for(const o in a){const u=o.charAt(0).toUpperCase()+o.slice(1);i[`set${s}${u}`](a[o])}return i}function Ct(e,t,n){const a=Ft(e,t,n),s=new Date(a.year,a.month===null?null:a.month-1,a.day===null?1:a.day,a.hour,a.minute,a.second,a.millisecond),r=s.getTimezoneOffset();return a.timezoneOffset===null||a.timezoneOffset===r?s:xe(s,{minutes:a.timezoneOffset-r},1)}function Ft(e,t,n,a,s){const r={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(s!==void 0&&Object.assign(r,s),e==null||e===""||typeof e!="string")return r;t===void 0&&(t=ze);const i=qe(n,Be.props),o=i.months,u=i.monthsShort,{regex:v,map:l}=Yt(t,i),d=e.match(v);if(d===null)return r;let y="";if(l.X!==void 0||l.x!==void 0){const D=parseInt(d[l.X!==void 0?l.X:l.x],10);if(isNaN(D)===!0||D<0)return r;const $=new Date(D*(l.X!==void 0?1e3:1));r.year=$.getFullYear(),r.month=$.getMonth()+1,r.day=$.getDate(),r.hour=$.getHours(),r.minute=$.getMinutes(),r.second=$.getSeconds(),r.millisecond=$.getMilliseconds()}else{if(l.YYYY!==void 0)r.year=parseInt(d[l.YYYY],10);else if(l.YY!==void 0){const D=parseInt(d[l.YY],10);r.year=D<0?D:2e3+D}if(l.M!==void 0){if(r.month=parseInt(d[l.M],10),r.month<1||r.month>12)return r}else l.MMM!==void 0?r.month=u.indexOf(d[l.MMM])+1:l.MMMM!==void 0&&(r.month=o.indexOf(d[l.MMMM])+1);if(l.D!==void 0){if(r.day=parseInt(d[l.D],10),r.year===null||r.month===null||r.day<1)return r;const D=a!=="persian"?new Date(r.year,r.month,0).getDate():_t(r.year,r.month);if(r.day>D)return r}l.H!==void 0?r.hour=parseInt(d[l.H],10)%24:l.h!==void 0&&(r.hour=parseInt(d[l.h],10)%12,(l.A&&d[l.A]==="PM"||l.a&&d[l.a]==="pm"||l.aa&&d[l.aa]==="p.m.")&&(r.hour+=12),r.hour=r.hour%24),l.m!==void 0&&(r.minute=parseInt(d[l.m],10)%60),l.s!==void 0&&(r.second=parseInt(d[l.s],10)%60),l.S!==void 0&&(r.millisecond=parseInt(d[l.S],10)*10**(3-d[l.S].length)),(l.Z!==void 0||l.ZZ!==void 0)&&(y=l.Z!==void 0?d[l.Z].replace(":",""):d[l.ZZ],r.timezoneOffset=(y[0]==="+"?-1:1)*(60*y.slice(1,3)+1*y.slice(3,5)))}return r.dateHash=x(r.year,6)+"/"+x(r.month)+"/"+x(r.day),r.timeHash=x(r.hour)+":"+x(r.minute)+":"+x(r.second)+y,r}function Vt(e){return typeof e=="number"?!0:isNaN(Date.parse(e))===!1}function Et(e,t){return Re(new Date,e,t)}function jt(e){const t=new Date(e).getDay();return t===0?7:t}function oe(e){const t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);const n=new Date(t.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);const a=t.getTimezoneOffset()-n.getTimezoneOffset();t.setHours(t.getHours()-a);const s=(t-n)/(Ze*7);return 1+Math.floor(s)}function Ht(e){return e.getFullYear()*1e4+e.getMonth()*100+e.getDate()}function he(e,t){const n=new Date(e);return t===!0?Ht(n):n.getTime()}function Pt(e,t,n,a={}){const s=he(t,a.onlyDate),r=he(n,a.onlyDate),i=he(e,a.onlyDate);return(i>s||a.inclusiveFrom===!0&&i===s)&&(i<r||a.inclusiveTo===!0&&i===r)}function It(e,t){return xe(e,t,1)}function Bt(e,t){return xe(e,t,-1)}function V(e,t,n){const a=new Date(e),s=`set${n===!0?"UTC":""}`;switch(t){case"year":case"years":a[`${s}Month`](0);case"month":case"months":a[`${s}Date`](1);case"day":case"days":case"date":a[`${s}Hours`](0);case"hour":case"hours":a[`${s}Minutes`](0);case"minute":case"minutes":a[`${s}Seconds`](0);case"second":case"seconds":a[`${s}Milliseconds`](0)}return a}function Ut(e,t,n){const a=new Date(e),s=`set${n===!0?"UTC":""}`;switch(t){case"year":case"years":a[`${s}Month`](11);case"month":case"months":a[`${s}Date`]($e(a));case"day":case"days":case"date":a[`${s}Hours`](23);case"hour":case"hours":a[`${s}Minutes`](59);case"minute":case"minutes":a[`${s}Seconds`](59);case"second":case"seconds":a[`${s}Milliseconds`](999)}return a}function Lt(e){let t=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(n=>{t=Math.max(t,new Date(n))}),t}function Qt(e){let t=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(n=>{t=Math.min(t,new Date(n))}),t}function se(e,t,n){return(e.getTime()-e.getTimezoneOffset()*De-(t.getTime()-t.getTimezoneOffset()*De))/n}function Xe(e,t,n="days"){const a=new Date(e),s=new Date(t);switch(n){case"years":case"year":return a.getFullYear()-s.getFullYear();case"months":case"month":return(a.getFullYear()-s.getFullYear())*12+a.getMonth()-s.getMonth();case"days":case"day":case"date":return se(V(a,"day"),V(s,"day"),Ze);case"hours":case"hour":return se(V(a,"hour"),V(s,"hour"),$t);case"minutes":case"minute":return se(V(a,"minute"),V(s,"minute"),De);case"seconds":case"second":return se(V(a,"second"),V(s,"second"),1e3)}}function ue(e){return Xe(e,V(e,"year"),"days")+1}function Zt(e){return Ue(e)===!0?"date":typeof e=="number"?"number":"string"}function zt(e,t,n){const a=new Date(e);if(t){const s=new Date(t);if(a<s)return s}if(n){const s=new Date(n);if(a>s)return s}return a}function qt(e,t,n){const a=new Date(e),s=new Date(t);if(n===void 0)return a.getTime()===s.getTime();switch(n){case"second":case"seconds":if(a.getSeconds()!==s.getSeconds())return!1;case"minute":case"minutes":if(a.getMinutes()!==s.getMinutes())return!1;case"hour":case"hours":if(a.getHours()!==s.getHours())return!1;case"day":case"days":case"date":if(a.getDate()!==s.getDate())return!1;case"month":case"months":if(a.getMonth()!==s.getMonth())return!1;case"year":case"years":if(a.getFullYear()!==s.getFullYear())return!1;break;default:throw new Error(`date isSameDate unknown unit ${n}`)}return!0}function $e(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function R(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const Ce={YY(e,t,n){const a=this.YYYY(e,t,n)%100;return a>=0?x(a):"-"+x(Math.abs(a))},YYYY(e,t,n){return n!=null?n:e.getFullYear()},M(e){return e.getMonth()+1},Mo(e){return R(e.getMonth()+1)},MM(e){return x(e.getMonth()+1)},MMM(e,t){return t.monthsShort[e.getMonth()]},MMMM(e,t){return t.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return R(this.Q(e))},D(e){return e.getDate()},Do(e){return R(e.getDate())},DD(e){return x(e.getDate())},DDD(e){return ue(e)},DDDo(e){return R(ue(e))},DDDD(e){return x(ue(e),3)},d(e){return e.getDay()},do(e){return R(e.getDay())},dd(e,t){return t.days[e.getDay()].slice(0,2)},ddd(e,t){return t.daysShort[e.getDay()]},dddd(e,t){return t.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return oe(e)},wo(e){return R(oe(e))},ww(e){return x(oe(e))},H(e){return e.getHours()},HH(e){return x(e.getHours())},h(e){const t=e.getHours();return t===0?12:t>12?t%12:t},hh(e){return x(this.h(e))},m(e){return e.getMinutes()},mm(e){return x(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return x(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return x(Math.floor(e.getMilliseconds()/10))},SSS(e){return x(e.getMilliseconds(),3)},A(e){return e.getHours()<12?"AM":"PM"},a(e){return e.getHours()<12?"am":"pm"},aa(e){return e.getHours()<12?"a.m.":"p.m."},Z(e,t,n,a){const s=a==null?e.getTimezoneOffset():a;return Ae(s,":")},ZZ(e,t,n,a){const s=a==null?e.getTimezoneOffset():a;return Ae(s)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function Jt(e,t,n,a,s){if(e!==0&&!e||e===1/0||e===-1/0)return;const r=new Date(e);if(isNaN(r))return;t===void 0&&(t=ze);const i=qe(n,Be.props);return t.replace(Tt,(o,u)=>o in Ce?Ce[o](r,i,a,s):u===void 0?o:u.split("\\]").join("]"))}function Rt(e){return Ue(e)===!0?new Date(e.getTime()):e}var Fe={isValid:Vt,extractDate:Ct,buildDate:Et,getDayOfWeek:jt,getWeekOfYear:oe,isBetweenDates:Pt,addToDate:It,subtractFromDate:Bt,adjustDate:Re,startOfDate:V,endOfDate:Ut,getMaxDate:Lt,getMinDate:Qt,getDateDiff:Xe,getDayOfYear:ue,inferDateFormat:Zt,getDateBetween:zt,isSameDate:qt,daysInMonth:$e,formatDate:Jt,clone:Rt},H=yt({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:t}){const n=bt(),a=E(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return Ye("td",{class:a.value},Ne(t.default));const s=n.vnode.key,r=(e.props.colsMap!==void 0?e.props.colsMap[s]:null)||e.props.col;if(r===void 0)return;const{row:i}=e.props;return Ye("td",{class:a.value+r.__tdClass(i),style:r.__tdStyle(i)},Ne(t.default))}}});const Xt=async(e,t,n,a,s)=>{const r=await fetch(`/api/payments/${e.toLowerCase()}/${t}?startdate=${a}&enddate=${s}&currency=${n}`,{method:"GET"});if(!r.ok)throw r;return r.json()};var Wt=Array.isArray;function Gt(e,t){return Wt(t)?e.apply(void 0,ot([],ut(t))):e(t)}function Kt(e){return Z(function(t){return Gt(e,t)})}var ea=Array.isArray,ta=Object.getPrototypeOf,aa=Object.prototype,na=Object.keys;function sa(e){if(e.length===1){var t=e[0];if(ea(t))return{args:t,keys:null};if(ra(t)){var n=na(t);return{args:n.map(function(a){return t[a]}),keys:n}}}return{args:e,keys:null}}function ra(e){return e&&typeof e=="object"&&ta(e)===aa}function oa(e,t){return e.reduce(function(n,a,s){return n[a]=t[s],n},{})}function pe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=lt(e),a=it(e),s=sa(e),r=s.args,i=s.keys;if(r.length===0)return ke([],n);var o=new ct(ua(r,n,i?function(u){return oa(i,u)}:He));return a?o.pipe(Kt(a)):o}function ua(e,t,n){return n===void 0&&(n=He),function(a){Ve(t,function(){for(var s=e.length,r=new Array(s),i=s,o=s,u=function(l){Ve(t,function(){var d=ke(e[l],t),y=!1;d.subscribe(ft(a,function(D){r[l]=D,y||(y=!0,o--),o||a.next(n(r.slice()))},function(){--i||a.complete()}))},a)},v=0;v<s;v++)u(v)},a)}}function Ve(e,t,n){e?dt(n,e,t):t()}const la=[{domain:"ethereum",label:"Ethereum",token:"ETH"},{domain:"arbitrum-one",label:"Arbitrum One",token:"ETH"},{domain:"optimism",label:"Optimism",token:"ETH"},{domain:"polygon",label:"Polygon",token:"MATIC"},{domain:"base",label:"Base",token:"MATIC"}],Ee=e=>{if(e===void 0)return[];const t=[];return(e.swaps||[]).forEach(n=>{Object.keys(n.tokens).forEach(a=>{t.indexOf(a)===-1&&t.push(a)})}),t.sort((n,a)=>n>a?1:-1)},W=(...e)=>{const t=e.reduce((n,a)=>n+=a,0);return isNaN(t)?void 0:t},ia=(e,t)=>{var a;if(!e)return[];const n={};for(const s of t)for(const[r,i]of Object.entries(s.tokens)){const o=i.type==="sell"?"sold":"bought",u=(a=n[r])!=null?a:{token:r,priceNow:e.currentPrices[r],sold:{amount:0,value:0,valueNow:0},bought:{amount:0,value:0,valueNow:0},total:{amount:0,value:0,valueNow:0}};u[o].amount+=i.amount,u[o].value=W(u[o].value,i.value),u[o].valueNow=W(u[o].valueNow,i.valueNow),n[r]=u}return Object.values(n).map(s=>(s.total.amount=s.bought.amount-s.sold.amount,s.total.value=W(s.bought.value,-s.sold.value),s.total.valueNow=W(s.bought.valueNow,-s.sold.valueNow),s))},ca=(e,t)=>(e.forEach(n=>{Object.keys(n.tokens).forEach(a=>{n.tokens[a].valueNow=t[a]?n.tokens[a].amount*t[a]:void 0})}),e),da=([e,t,n])=>{const a=e.data,s=t.filter(i=>i.value===!0).map(i=>i.name);return((a==null?void 0:a.swaps)||[]).filter(i=>n.twoAssets&&Object.keys(i.tokens).length<=2||n.multipleAssets&&Object.keys(i.tokens).length>2).filter(i=>Object.keys(i.tokens).some(o=>s.indexOf(o)>-1))},We=(e,t=[])=>{const n=t.map(s=>s.hash),a={value:0,amount:0,valueNow:0};return e.filter(s=>!s.hash||n.indexOf(s.hash)===-1).forEach(s=>{a.amount+=s.amount,a.value=W(a.value,s.value),a.valueNow=W(a.valueNow,s.valueNow)}),a},fa=([e,t,n,a])=>{var i;const s=e.data;if(!s||!((i=s==null?void 0:s.tokens)!=null&&i[t]))return;const r={payments:s.tokens[t].payments,currentPrice:s.tokens[t].currentPrice};return r.payments=r.payments.filter(o=>o.amount>0&&n!=="Outgoing transfers only"||o.amount<0&&n!=="Incoming transfers only"),r.summary=We(r.payments,a),r},ma=e=>{const t={};for(const n of Object.keys(e)){const a=e[n].values.map(s=>{const r=e[n].currentPrice!==void 0?s.amount*e[n].currentPrice:void 0;return{...s,valueNow:r,isoDate:le(s.date)}});t[n]={payments:a,summary:We(a),currentPrice:e[n].currentPrice}}return t},ge=new te({domain:"polkadot",label:"Polkadot",token:"DOT"}),ha=ke(mt()).pipe(Z(e=>[...e.chains,...la]),Z(e=>e.sort((t,n)=>t.label>n.label?1:-1))),L=new _e(1),G=new _e(1),ve=new te("All transfers"),B=new te([]),ye=new te({twoAssets:!0,multipleAssets:!0}),Q=new te([]),re=new _e(1),ce=wt("payments",{state:()=>({paymentList$:G.asObservable(),swaps$:L.asObservable(),chain$:ge.asObservable(),currency:"USD",address:"",selectedToken$:re.asObservable(),chainList$:ha,paymentsFilter$:ve.asObservable(),startDate:Fe.formatDate(ht().getTime(),"YYYY/MM/DD"),endDate:Fe.formatDate(Date.now(),"YYYY/MM/DD"),excludedPayments$:B.asObservable(),swapTypeFilter$:ye.asObservable(),visibleSwapTokens$:Q.asObservable()}),getters:{swapTokens$(){return L.pipe(Z(e=>Ee(e.data)))},paymentsCurrentToken$(){return pe([G,re,ve,B]).pipe(Z(fa))},filteredSwaps$(){return pe([L,Q,ye]).pipe(Z(da))},swapSummary$(){return pe([L,this.filteredSwaps$]).pipe(Z(([e,t])=>ia(e.data,t)))}},actions:{selectChain(e){ge.next(e)},setPaymentsFilter(e){ve.next(e)},selectToken(e){re.next(e)},setSwapsFilter(e){ye.next(e)},async toggleAllExcludedPayments(){if((await q(B)).length===0){const t=await q(this.paymentsCurrentToken$);B.next(((t==null?void 0:t.payments)||[]).filter(n=>n.hash).map(n=>({hash:n.hash})))}else B.next([])},async toggleExcludedPayment(e){const t=await q(B);t.filter(a=>a.hash===e).length?B.next([...t.filter(a=>a.hash!==e)]):B.next([...t,{hash:e}])},async toggleAllVisibleSwapTokens(){const e=await q(Q),t=e.filter(n=>n.value).length>0;Q.next(e.map(n=>({...n,value:!t})))},async updateSwapAssetVisibility(e,t){const a=(await q(Q)).map(s=>s.name===e?{name:e,value:t}:{...s});Q.next(a)},async fetchTransfers(){L.next({data:void 0,pending:!0}),G.next({data:void 0,pending:!0});try{const e=await q(ge),t=new Date(this.startDate).getTime(),n=new Date(this.endDate);n.setHours(23),n.setMinutes(59),n.setSeconds(59);const a={chain:e.domain,address:this.address,startDate:le(t),endDate:le(n.getTime()),currency:this.currency},{swaps:s,transfers:r,currentPrices:i}=await Xt(e.domain,this.address.trim(),this.currency,t,n.getTime()),o={...a,tokens:ma(r)},u=Object.keys(o.tokens).sort((d,y)=>d>y?1:-1)[0],v={...a,startDate:t,endDate:n.getTime(),swaps:ca(s,i),currentPrices:i},l=Ee(v).map(d=>({name:d,value:!0}));L.next({data:v,pending:!1}),Q.next(l),G.next({data:o,pending:!1}),re.next(u)}catch(e){L.next({data:void 0,pending:!1,error:e}),G.next({data:void 0,pending:!1,error:e})}}}}),je={etherum:"https://etherscan.io/tx/","arbitrum-one":"https://arbiscan.io/tx/",polygon:"https://polygonscan.com/tx/",optimism:"https://optimistic.etherscan.io/tx/",base:"https://basescan.org/tx/",moonbeam:"https://moonscan.io/tx/"},pa=(e,t)=>je[t]!==void 0?je[t]+e:`https://${t}.subscan.io/tx/${e}`,ga={class:"q-pa-md"},va=I("span",null,"Filter trades according to type of swap",-1),ya={class:"col"},ba=I("div",{class:"q-mt-md"},"Filter trades according to assets",-1),wa={class:"flex justify-center"},Da=ie({__name:"SwapFilterToggles",setup(e){const t=ce(),n=C([]),a=C(void 0),s=t.visibleSwapTokens$.subscribe(d=>{n.value=d});function r(d,y){t.updateSwapAssetVisibility(d,y)}const i=t.swapTypeFilter$.subscribe(d=>{a.value=d});Se(()=>{s.unsubscribe(),i.unsubscribe()});function o(d){var y;t.setSwapsFilter({twoAssets:d,multipleAssets:((y=a.value)==null?void 0:y.multipleAssets)||!1})}function u(d){var y;t.setSwapsFilter({twoAssets:((y=a.value)==null?void 0:y.twoAssets)||!1,multipleAssets:d})}const v=E(()=>n.value.every(d=>d.value));function l(){t.toggleAllVisibleSwapTokens()}return(d,y)=>{var D,$;return w(),k("div",ga,[va,I("div",ya,[b(ne,{modelValue:(D=a.value)==null?void 0:D.twoAssets,"onUpdate:modelValue":o,label:"Show trades with two assets"},null,8,["modelValue"]),b(ne,{modelValue:($=a.value)==null?void 0:$.multipleAssets,label:"Show trades with more than two assets","onUpdate:modelValue":u},{default:p(()=>[b(Dt,{name:"info"},{default:p(()=>[b(pt,{anchor:"top middle",self:"bottom middle",offset:[10,10],class:"text-body2"},{default:p(()=>[T(" These are usually transactions to provide/remove liquidity to/from a dex ")]),_:1})]),_:1})]),_:1},8,["modelValue"])]),ba,I("div",wa,[b(ne,{"model-value":v.value,"onUpdate:modelValue":l,label:"All"},null,8,["model-value"]),(w(!0),k(F,null,P(n.value,N=>(w(),k("div",{key:N.name},[b(ne,{"model-value":N.value,label:N.name.toUpperCase(),"onUpdate:modelValue":j=>r(N.name,j)},null,8,["model-value","label","onUpdate:modelValue"])]))),128))])])}}}),Ge=(e,t="")=>Object.keys(e).reduce((n,a)=>{const s=t.length?t+"_":"";return typeof e[a]=="object"&&e[a]!==null?Object.assign(n,Ge(e[a],s+a)):n[s+a]=e[a],n},{}),ka={class:"q-pa-md full-width"},_a={class:"text-h6",style:{"line-break":"anywhere"}},Sa=ie({__name:"SwapSummaryTable",setup(e){const t=ce(),n=C(void 0),a=C([]),s=t.swaps$.subscribe(d=>{n.value=d.data}),r=t.swapSummary$.subscribe(d=>{a.value=d});Se(()=>{s.unsubscribe(),r.unsubscribe()});const i=E(()=>{var d,y,D,$,N,j;return[{name:"token",align:"right",label:"Token",field:"token",format:S=>S.toUpperCase()},{name:"soldAmount",align:"right",label:"Total sold",field:"sold",format:S=>A(S.amount)},{name:"boughtValue",align:"right",label:`Value (${(d=n.value)==null?void 0:d.currency})`,field:"sold",format:S=>A(S.value)},{name:"boughtValueNow",align:"right",label:`Value now (${(y=n.value)==null?void 0:y.currency})`,field:"sold",format:S=>A(S.valueNow)},{name:"boughtAmount",align:"right",label:"Total bought",field:"bought",format:S=>A(S.amount)},{name:"boughtValue",align:"right",label:`Value (${(D=n.value)==null?void 0:D.currency})`,field:"bought",format:S=>A(S.value)},{name:"boughtValueNow",align:"right",label:`Value now (${($=n.value)==null?void 0:$.currency})`,field:"bought",format:S=>A(S.valueNow)},{name:"change",align:"right",label:"Change",field:"total",format:S=>A(S.amount)},{name:"totalValue",align:"right",label:`Value (${(N=n.value)==null?void 0:N.currency})`,field:"total",format:S=>A(S.value)},{name:"totalValueNow",align:"right",label:`Value now (${(j=n.value)==null?void 0:j.currency})`,field:"total",format:S=>A(S.valueNow)}]}),o=E(()=>a.value),u=C({sortBy:"block",descending:!0,page:1,rowsPerPage:10});function v(){var $,N,j;const d=new be,y=[...a.value.map(S=>Ge(S))||[]];y[0]={Chain:($=n.value)==null?void 0:$.chain,Currency:(N=n.value)==null?void 0:N.currency,"Wallet address":(j=n.value)==null?void 0:j.address,...y[0]};const D=d.parse(y);K.exports.saveAs(new Blob([D],{type:"text/plain;charset=utf-8"}),"swaps-summary.csv")}function l(){K.exports.saveAs(new Blob([JSON.stringify(a.value)],{type:"text/plain;charset=utf-8"}),"swaps-summary.json")}return(d,y)=>(w(),k("div",ka,[b(Pe,{rows:o.value,columns:i.value,"row-key":"block","no-data-label":"No trades found",pagination:u.value},{top:p(()=>{var D;return[I("span",_a,"Summary of trades on "+O((D=n.value)==null?void 0:D.chain),1),b(Ie),b(ee,{color:"primary",class:"q-mr-sm",onClick:v},{default:p(()=>[T("Export CSV ")]),_:1}),b(ee,{color:"primary",onClick:l},{default:p(()=>[T("Export JSON")]),_:1})]}),_:1},8,["rows","columns","pagination"])]))}}),Ma={class:"q-pa-md"},xa={class:"text-h6",style:{"line-break":"anywhere"}},$a=["href"],Ta=I("img",{src:"img/external_link.png"},null,-1),Oa=[Ta],Ya=ie({__name:"SwapTable",setup(e){const t=ce(),n=C(void 0),a=C([]),s=C([]),r=t.swaps$.subscribe(h=>{n.value=h.data}),i=t.swapSummary$.subscribe(h=>{a.value=h}),o=t.filteredSwaps$.subscribe(h=>{s.value=h});Se(()=>{r.unsubscribe(),i.unsubscribe(),o.unsubscribe()});const u=(h,m=!0)=>Object.keys(h).filter(c=>h[c].type===(m?"sell":"buy")),v=h=>u(h,!0),l=h=>u(h,!1),d=h=>{let m=v(h).reduce((c,f)=>c+h[f].value,0);return isNaN(m)&&(m=l(h).reduce((c,f)=>c+h[f].value,0)),m},y=(h,m)=>(h[0]||0)>(m[0]||0)?1:-1,D=(h,m)=>(h[0]||"")>(m[0]||"")?1:-1,$=E(()=>{var h,m,c;return[{name:"date",label:"Date",align:"left",field:f=>le(f.date*1e3),sortable:!0},{name:"block",align:"right",label:"Block",field:"block",sortable:!0},{name:"contract",align:"center",label:"Contract",field:"contract",format:f=>f?f.substring(0,10)+(f.length>10?"...":""):"-",sortable:!0},{name:"tokenssold",align:"right",label:"Token sold",field:"tokensSold",sort:D,sortable:!0},{name:"amountsold",align:"right",label:"Amount",field:"amountSold",format:f=>f.map(g=>Te(g,4)),sort:y,sortable:!0},{name:"pricesold",align:"right",label:`Price (${(h=n.value)==null?void 0:h.currency})`,field:"priceSold",format:f=>f.map(g=>A(g)),sort:y,sortable:!0},{name:"tokensbought",align:"right",label:"Token bought",field:"tokensBought",sort:D,sortable:!0},{name:"amountbought",align:"right",label:"Amount",field:"amountBought",format:f=>f.map(g=>Te(g,4)),sort:y,sortable:!0},{name:"pricebought",align:"right",label:`Price (${(m=n.value)==null?void 0:m.currency})`,format:f=>f.map(g=>A(g)),sort:y,field:"priceBought",sortable:!0},{name:"value",align:"right",label:`Transaction Value (${(c=n.value)==null?void 0:c.currency})`,format:f=>A(f),field:"value",sortable:!0},{name:"functionnName",required:!0,align:"left",label:"Function",field:"functionName",sortable:!0},{name:"tx",align:"center",label:"Transaction",field:"hash",format:f=>{var g;return pa(f,((g=n.value)==null?void 0:g.chain)||"")},sortable:!1}]}),N=E(()=>{const h=[];return s.value.forEach(m=>{h.push({block:m.block,date:m.date,contract:m.contract||"",functionName:m.functionName,hash:m.hash,tokensSold:v(m.tokens).map(c=>c.toUpperCase()),amountSold:v(m.tokens).map(c=>m.tokens[c].amount),priceSold:v(m.tokens).map(c=>m.tokens[c].price),tokensBought:l(m.tokens).map(c=>c.toUpperCase()),amountBought:l(m.tokens).map(c=>m.tokens[c].amount),priceBought:l(m.tokens).map(c=>m.tokens[c].price),value:d(m.tokens)})}),h}),j=C({sortBy:"block",descending:!0,page:1,rowsPerPage:10});function S(h){const m={...h,date:Oe(h.date*1e3)},c=[];let f={};return Object.keys(h.tokens).forEach(g=>{const M=h.tokens[g];M.type==="sell"&&(m.sold_token?(f.sold_token&&(c.push(f),f={}),f.sold_token=g.toUpperCase(),f.sold_amount=M.amount,f.sale_price=M.price,f.sale_value=M.value):(m.sold_token=g.toUpperCase(),m.sold_amount=M.amount,m.sale_price=M.price,m.sale_value=M.value)),M.type==="buy"&&(m.bought_token?(f.bought_token&&(c.push(f),f={}),f.bought_token=g.toUpperCase(),f.bought_amount=M.amount,f.purchase_price=M.price,f.purchase_value=M.value):(m.bought_token=g.toUpperCase(),m.bought_amount=M.amount,m.purchase_price=M.price,m.purchase_value=M.value))}),(f.bought_token||f.sold_token)&&c.push(f),delete m.tokens,[m,c]}function Ke(){var g,M,ae;const h=new be,m=[];s.value.forEach(z=>{const[at,nt]=S(z);m.push(at),nt.forEach(st=>m.push(st))});const c=[...m];c[0]={Chain:(g=n.value)==null?void 0:g.chain,Currency:(M=n.value)==null?void 0:M.currency,"Wallet address":(ae=n.value)==null?void 0:ae.address,...c[0]};const f=h.parse(c);K.exports.saveAs(new Blob([f],{type:"text/plain;charset=utf-8"}),"swaps.csv")}function et(){const h=new be,m=[];s.value.forEach(g=>{const[M,ae]=S(g);m.push({Date:M.date,"Sent Amount":M.sold_amount,"Sent Currency":M.sold_token,"Received Amount":M.bought_amount,"Received Currency":M.bought_token,TxHash:M.hash}),ae.forEach(z=>m.push({"Sent Amount":z.sold_amount,"Sent Currency":z.sold_token,"Received Amount":z.bought_amount,"Received Currency":z.bought_token}))});const c=[...m];c[0]={...c[0]};const f=h.parse(c);K.exports.saveAs(new Blob([f],{type:"text/plain;charset=utf-8"}),"swaps.csv")}function tt(){const h=s.value.map(m=>({...m,date:Oe(m.date*1e3)}));K.exports.saveAs(new Blob([JSON.stringify({...n.value||{},swaps:h})],{type:"text/plain;charset=utf-8"}),"swaps.json")}return(h,m)=>(w(),k("div",Ma,[b(Pe,{rows:N.value,columns:$.value,"row-key":"block","no-data-label":"No trades found",pagination:j.value},{top:p(()=>{var c;return[I("span",xa,"Trades on "+O((c=n.value)==null?void 0:c.chain),1),b(Ie),b(ee,{color:"primary",class:"q-mr-sm",onClick:Ke},{default:p(()=>[T("Export CSV ")]),_:1}),b(ee,{color:"primary",class:"q-mr-sm",onClick:et},{default:p(()=>[T("Koinly-friendly CSV ")]),_:1}),b(ee,{color:"primary",onClick:tt},{default:p(()=>[T("Export JSON")]),_:1})]}),"body-cell-tokensbought":p(c=>[b(H,{props:c},{default:p(()=>[(w(!0),k(F,null,P(c.value,(f,g)=>(w(),k("div",{key:g},O(f),1))),128))]),_:2},1032,["props"])]),"body-cell-amountbought":p(c=>[b(H,{props:c},{default:p(()=>[(w(!0),k(F,null,P(c.value,(f,g)=>(w(),k("div",{key:g},O(f),1))),128))]),_:2},1032,["props"])]),"body-cell-pricebought":p(c=>[b(H,{props:c},{default:p(()=>[(w(!0),k(F,null,P(c.value,(f,g)=>(w(),k("div",{key:g},O(f),1))),128))]),_:2},1032,["props"])]),"body-cell-valuebought":p(c=>[b(H,{props:c},{default:p(()=>[(w(!0),k(F,null,P(c.value,(f,g)=>(w(),k("div",{key:g},O(f),1))),128))]),_:2},1032,["props"])]),"body-cell-tokenssold":p(c=>[b(H,{props:c},{default:p(()=>[(w(!0),k(F,null,P(c.value,(f,g)=>(w(),k("div",{key:g},O(f),1))),128))]),_:2},1032,["props"])]),"body-cell-amountsold":p(c=>[b(H,{props:c},{default:p(()=>[(w(!0),k(F,null,P(c.value,(f,g)=>(w(),k("div",{key:g},O(f),1))),128))]),_:2},1032,["props"])]),"body-cell-valuesold":p(c=>[b(H,{props:c},{default:p(()=>[(w(!0),k(F,null,P(c.value,(f,g)=>(w(),k("div",{key:g},O(f),1))),128))]),_:2},1032,["props"])]),"body-cell-pricesold":p(c=>[b(H,{props:c},{default:p(()=>[(w(!0),k(F,null,P(c.value,(f,g)=>(w(),k("div",{key:g},O(f),1))),128))]),_:2},1032,["props"])]),"body-cell-tx":p(c=>[c.col.name==="tx"?(w(),we(H,{key:0,class:"text-center"},{default:p(()=>[I("a",{href:c.value,target:"_blank"},Oa,8,$a)]),_:2},1024)):X("",!0)]),_:1},8,["rows","columns","pagination"])]))}}),Na={key:1,class:"table q-my-md"},Aa={key:2,class:"justify-around items-center column q-mb-lg"},Ca={key:1,class:"q-mx-auto text-center"},Fa=I("br",null,null,-1),Va=ie({__name:"TokenSwaps",setup(e){const t=ce(),n=C(void 0),a=C([]);t.swaps$.subscribe(u=>{n.value=u.data}),t.swapSummary$.subscribe(u=>{a.value=u});const s=E(()=>{var u;return de(a.value.reduce((v,l)=>v+(isNaN(l.sold.valueNow)?0:l.sold.valueNow),0),((u=n.value)==null?void 0:u.currency)||"")}),r=E(()=>{var u;return de(a.value.reduce((v,l)=>v+(isNaN(l.bought.valueNow)?0:l.bought.valueNow),0),((u=n.value)==null?void 0:u.currency)||"")}),i=E(()=>{var u;return de(a.value.reduce((v,l)=>v+(isNaN(l.bought.valueNow)?0:l.bought.valueNow-l.sold.valueNow),0),((u=n.value)==null?void 0:u.currency)||"")}),o=E(()=>a.value.every(u=>u.total.amount===0||!isNaN(u.bought.valueNow)&&!isNaN(u.sold.valueNow)));return(u,v)=>(w(),k(F,null,[n.value?(w(),we(Da,{key:0,class:"text-center"})):X("",!0),n.value?(w(),k("div",Na,[b(Ya)])):X("",!0),n.value?(w(),k("div",Aa,[b(Sa),o.value?(w(),we(gt,{key:0,bordered:"",separator:""},{default:p(()=>[b(fe,{class:"justify-between"},{default:p(()=>[b(J,{avatar:""},{default:p(()=>[T(" Current value of total assets sold: ")]),_:1}),b(J,{class:"content-end"},{default:p(()=>[T(O(s.value),1)]),_:1})]),_:1}),b(fe,{class:"justify-between"},{default:p(()=>[b(J,null,{default:p(()=>[T(" Current value of total assets bought: ")]),_:1}),b(J,{class:"content-end"},{default:p(()=>[T(O(r.value),1)]),_:1})]),_:1}),b(fe,{class:"justify-between"},{default:p(()=>[b(J,{avatar:""},{default:p(()=>[T(" Total gain/loss: ")]),_:1}),b(J,{class:"content-end"},{default:p(()=>[T(O(i.value),1)]),_:1})]),_:1})]),_:1})):X("",!0),o.value?X("",!0):(w(),k("div",Ca,[T(" Unfortunately, for some tokens prices could not be determined. "),Fa,T(" A summary of total loss / gain could therefore not be calculated. ")]))])):X("",!0)],64))}});var Ia=Object.freeze(Object.defineProperty({__proto__:null,default:Va},Symbol.toStringTag,{value:"Module"}));export{H as Q,Ia as T,Ft as _,Pa as a,pa as b,Va as c,Fe as d,Jt as f,Xe as g,_t as j,Ha as t,ce as u};
