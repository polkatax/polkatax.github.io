import{c as Ie,X as re,r as V,D as j,Y as J,G as x,F as M,Z as Et,$ as Bt,I as X,a0 as R,a as d,a1 as It,a2 as Qt,a3 as Ut,a4 as Rt,a5 as Jt,w as he,h,a6 as we,b as zt,g as ft,a7 as Kt,S as lt,a8 as I,a9 as Wt,aa as Gt,ab as Xt,Q as Zt,H as _,K as ht,B as ge,ac as ot,E as ye,ad as yt,ae as te,af as Qe,ag as ea,ah as le}from"./index.1d03841b.js";import{u as ta,a as aa,b as na,c as la}from"./QTabs.48f791e8.js";import{C as gt,Q as oa,u as sa,t as ra,a as ua,_ as ia,b as ca}from"./use-quasar.23d2b34c.js";import{Q as bt,a as _t,b as pt,c as Be,p as ce,u as da,d as va,e as ma,f as fa,g as Fe,t as xt,h as ha,i as ya,J as st,j as Ne,F as Ae,k as rt,l as ga}from"./fetch-subscan-chains.c67a68d7.js";import{t as ba,a as ut,f as _a,g as pa,j as Le,_ as xa,d as wt,u as be,b as wa,Q as it,c as ka}from"./TokenSwaps.18bdf2b8.js";import"./rtl.276c3f1b.js";var ct=Ie({name:"QTab",props:ta,emits:aa,setup(a,{slots:v,emit:o}){const{renderTab:m}=na(a,v,o);return()=>m("div")}});const Ca={class:"q-pa-md"},Da=re({__name:"ChainDropdown",props:{modelValue:Object,chains:Array},emits:["update:modelValue"],setup(a,{emit:v}){const o=a,m=V([]);function c(f){v("update:modelValue",f)}function $(f,y){if(f.trim()===""){y(()=>{m.value=o.chains||[]});return}y(()=>{const C=f.toLowerCase();m.value=(o.chains||[]).filter(w=>w.label.toLowerCase().indexOf(C)>-1||w.domain.toLowerCase().indexOf(C)>-1||w.token.toLowerCase().indexOf(C)>-1)})}return(f,y)=>(j(),J("div",Ca,[x(bt,{filled:"",onFilter:$,"use-input":"",modelValue:o.modelValue,label:o.modelValue?o.modelValue.label:"Blockchain",options:m.value,"option-value":"chain","option-label":"token",color:"teal","onUpdate:modelValue":c,clearable:"","options-selected-class":"text-deep-orange"},{option:M(C=>[x(_t,Et(Bt(C.itemProps)),{default:M(()=>[x(pt,null,{default:M(()=>[x(Be,null,{default:M(()=>[X(R(C.opt.label||C.opt.domain),1)]),_:2},1024),x(Be,{caption:""},{default:M(()=>[X(R(C.opt.token),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","label","options"])]))}});function Va(){let a=Object.create(null);return{getCache:(v,o)=>a[v]===void 0?a[v]=typeof o=="function"?o():o:a[v],setCache(v,o){a[v]=o},hasCache(v){return Object.hasOwnProperty.call(a,v)},clearCache(v){v!==void 0?delete a[v]:a=Object.create(null)}}}const qa=["gregorian","persian"],dt={mask:{type:String},locale:Object,calendar:{type:String,validator:a=>qa.includes(a),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},$a=["update:modelValue"];function oe(a){return a.year+"/"+ce(a.month)+"/"+ce(a.day)}function Ta(a,v){const o=d(()=>a.disable!==!0&&a.readonly!==!0),m=d(()=>o.value===!0?0:-1),c=d(()=>{const y=[];return a.color!==void 0&&y.push(`bg-${a.color}`),a.textColor!==void 0&&y.push(`text-${a.textColor}`),y.join(" ")});function $(){return a.locale!==void 0?{...v.lang.date,...a.locale}:v.lang.date}function f(y){const C=new Date,w=y===!0?null:0;if(a.calendar==="persian"){const H=ba(C);return{year:H.jy,month:H.jm,day:H.jd}}return{year:C.getFullYear(),month:C.getMonth()+1,day:C.getDate(),hour:w,minute:w,second:w,millisecond:w}}return{editable:o,tabindex:m,headerClass:c,getLocale:$,getCurrentDate:f}}const ee=20,Sa=["Calendar","Years","Months"],vt=a=>Sa.includes(a),Ee=a=>/^-?[\d]+\/[0-1]\d$/.test(a),fe=" \u2014 ";function se(a){return a.year+"/"+ce(a.month)}var Ma=Ie({name:"QDate",props:{...dt,...It,...Qt,modelValue:{required:!0,validator:a=>typeof a=="string"||Array.isArray(a)===!0||Object(a)===a||a===null},multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{...dt.mask,default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:Ee},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:Ee},navigationMaxYearMonth:{type:String,validator:Ee},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:vt}},emits:[...$a,"rangeStart","rangeEnd","navigation"],setup(a,{slots:v,emit:o}){const{proxy:m}=ft(),{$q:c}=m,$=Ut(a,c),{getCache:f}=Va(),{tabindex:y,headerClass:C,getLocale:w,getCurrentDate:H}=Ta(a,c);let D;const F=Rt(a),z=Kt(F),K=V(null),g=V(Ge()),u=V(w()),Y=d(()=>Ge()),ae=d(()=>w()),E=d(()=>H()),i=V(Xe(g.value,u.value)),N=V(a.defaultView),q=d(()=>c.lang.rtl===!0?"right":"left"),O=V(q.value),k=V(q.value),P=i.value.year,Q=V(P-P%ee-(P<0?ee:0)),T=V(null),ke=d(()=>{const e=a.landscape===!0?"landscape":"portrait";return`q-date q-date--${e} q-date--${e}-${a.minimal===!0?"minimal":"standard"}`+($.value===!0?" q-date--dark q-dark":"")+(a.bordered===!0?" q-date--bordered":"")+(a.square===!0?" q-date--square no-border-radius":"")+(a.flat===!0?" q-date--flat no-shadow":"")+(a.disable===!0?" disabled":a.readonly===!0?" q-date--readonly":"")}),G=d(()=>a.color||"primary"),Z=d(()=>a.textColor||"white"),ue=d(()=>a.emitImmediately===!0&&a.multiple!==!0&&a.range!==!0),de=d(()=>Array.isArray(a.modelValue)===!0?a.modelValue:a.modelValue!==null&&a.modelValue!==void 0?[a.modelValue]:[]),B=d(()=>de.value.filter(e=>typeof e=="string").map(e=>Pe(e,g.value,u.value)).filter(e=>e.dateHash!==null&&e.day!==null&&e.month!==null&&e.year!==null)),U=d(()=>{const e=t=>Pe(t,g.value,u.value);return de.value.filter(t=>Jt(t)===!0&&t.from!==void 0&&t.to!==void 0).map(t=>({from:e(t.from),to:e(t.to)})).filter(t=>t.from.dateHash!==null&&t.to.dateHash!==null&&t.from.dateHash<t.to.dateHash)}),Ce=d(()=>a.calendar!=="persian"?e=>new Date(e.year,e.month-1,e.day):e=>{const t=ut(e.year,e.month,e.day);return new Date(t.gy,t.gm-1,t.gd)}),$e=d(()=>a.calendar==="persian"?oe:(e,t,n)=>_a(new Date(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond),t===void 0?g.value:t,n===void 0?u.value:n,e.year,e.timezoneOffset)),_e=d(()=>B.value.length+U.value.reduce((e,t)=>e+1+pa(Ce.value(t.to),Ce.value(t.from)),0)),Ue=d(()=>{if(a.title!==void 0&&a.title!==null&&a.title.length!==0)return a.title;if(T.value!==null){const n=T.value.init,l=Ce.value(n);return u.value.daysShort[l.getDay()]+", "+u.value.monthsShort[n.month-1]+" "+n.day+fe+"?"}if(_e.value===0)return fe;if(_e.value>1)return`${_e.value} ${u.value.pluralDay}`;const e=B.value[0],t=Ce.value(e);return isNaN(t.valueOf())===!0?fe:u.value.headerTitle!==void 0?u.value.headerTitle(t,e):u.value.daysShort[t.getDay()]+", "+u.value.monthsShort[e.month-1]+" "+e.day}),kt=d(()=>B.value.concat(U.value.map(t=>t.from)).sort((t,n)=>t.year-n.year||t.month-n.month)[0]),Ct=d(()=>B.value.concat(U.value.map(t=>t.to)).sort((t,n)=>n.year-t.year||n.month-t.month)[0]),Re=d(()=>{if(a.subtitle!==void 0&&a.subtitle!==null&&a.subtitle.length!==0)return a.subtitle;if(_e.value===0)return fe;if(_e.value>1){const e=kt.value,t=Ct.value,n=u.value.monthsShort;return n[e.month-1]+(e.year!==t.year?" "+e.year+fe+n[t.month-1]+" ":e.month!==t.month?fe+n[t.month-1]:"")+" "+t.year}return B.value[0].year}),De=d(()=>{const e=[c.iconSet.datetime.arrowLeft,c.iconSet.datetime.arrowRight];return c.lang.rtl===!0?e.reverse():e}),Je=d(()=>a.firstDayOfWeek!==void 0?Number(a.firstDayOfWeek):u.value.firstDayOfWeek),Dt=d(()=>{const e=u.value.daysShort,t=Je.value;return t>0?e.slice(t,7).concat(e.slice(0,t)):e}),ne=d(()=>{const e=i.value;return a.calendar!=="persian"?new Date(e.year,e.month,0).getDate():Le(e.year,e.month)}),Vt=d(()=>typeof a.eventColor=="function"?a.eventColor:()=>a.eventColor),A=d(()=>{if(a.navigationMinYearMonth===void 0)return null;const e=a.navigationMinYearMonth.split("/");return{year:parseInt(e[0],10),month:parseInt(e[1],10)}}),L=d(()=>{if(a.navigationMaxYearMonth===void 0)return null;const e=a.navigationMaxYearMonth.split("/");return{year:parseInt(e[0],10),month:parseInt(e[1],10)}}),Te=d(()=>{const e={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return A.value!==null&&A.value.year>=i.value.year&&(e.year.prev=!1,A.value.year===i.value.year&&A.value.month>=i.value.month&&(e.month.prev=!1)),L.value!==null&&L.value.year<=i.value.year&&(e.year.next=!1,L.value.year===i.value.year&&L.value.month<=i.value.month&&(e.month.next=!1)),e}),Ve=d(()=>{const e={};return B.value.forEach(t=>{const n=se(t);e[n]===void 0&&(e[n]=[]),e[n].push(t.day)}),e}),ze=d(()=>{const e={};return U.value.forEach(t=>{const n=se(t.from),l=se(t.to);if(e[n]===void 0&&(e[n]=[]),e[n].push({from:t.from.day,to:n===l?t.to.day:void 0,range:t}),n<l){let s;const{year:p,month:r}=t.from,b=r<12?{year:p,month:r+1}:{year:p+1,month:1};for(;(s=se(b))<=l;)e[s]===void 0&&(e[s]=[]),e[s].push({from:void 0,to:s===l?t.to.day:void 0,range:t}),b.month++,b.month>12&&(b.year++,b.month=1)}}),e}),pe=d(()=>{if(T.value===null)return;const{init:e,initHash:t,final:n,finalHash:l}=T.value,[s,p]=t<=l?[e,n]:[n,e],r=se(s),b=se(p);if(r!==W.value&&b!==W.value)return;const S={};return r===W.value?(S.from=s.day,S.includeFrom=!0):S.from=1,b===W.value?(S.to=p.day,S.includeTo=!0):S.to=ne.value,S}),W=d(()=>se(i.value)),qt=d(()=>{const e={};if(a.options===void 0){for(let n=1;n<=ne.value;n++)e[n]=!0;return e}const t=typeof a.options=="function"?a.options:n=>a.options.includes(n);for(let n=1;n<=ne.value;n++){const l=W.value+"/"+ce(n);e[n]=t(l)}return e}),$t=d(()=>{const e={};if(a.events===void 0)for(let t=1;t<=ne.value;t++)e[t]=!1;else{const t=typeof a.events=="function"?a.events:n=>a.events.includes(n);for(let n=1;n<=ne.value;n++){const l=W.value+"/"+ce(n);e[n]=t(l)===!0&&Vt.value(l)}}return e}),Tt=d(()=>{let e,t;const{year:n,month:l}=i.value;if(a.calendar!=="persian")e=new Date(n,l-1,1),t=new Date(n,l-1,0).getDate();else{const s=ut(n,l,1);e=new Date(s.gy,s.gm-1,s.gd);let p=l-1,r=n;p===0&&(p=12,r--),t=Le(r,p)}return{days:e.getDay()-Je.value-1,endDay:t}}),Ke=d(()=>{const e=[],{days:t,endDay:n}=Tt.value,l=t<0?t+7:t;if(l<6)for(let r=n-l;r<=n;r++)e.push({i:r,fill:!0});const s=e.length;for(let r=1;r<=ne.value;r++){const b={i:r,event:$t.value[r],classes:[]};qt.value[r]===!0&&(b.in=!0,b.flat=!0),e.push(b)}if(Ve.value[W.value]!==void 0&&Ve.value[W.value].forEach(r=>{const b=s+r-1;Object.assign(e[b],{selected:!0,unelevated:!0,flat:!1,color:G.value,textColor:Z.value})}),ze.value[W.value]!==void 0&&ze.value[W.value].forEach(r=>{if(r.from!==void 0){const b=s+r.from-1,S=s+(r.to||ne.value)-1;for(let xe=b;xe<=S;xe++)Object.assign(e[xe],{range:r.range,unelevated:!0,color:G.value,textColor:Z.value});Object.assign(e[b],{rangeFrom:!0,flat:!1}),r.to!==void 0&&Object.assign(e[S],{rangeTo:!0,flat:!1})}else if(r.to!==void 0){const b=s+r.to-1;for(let S=s;S<=b;S++)Object.assign(e[S],{range:r.range,unelevated:!0,color:G.value,textColor:Z.value});Object.assign(e[b],{flat:!1,rangeTo:!0})}else{const b=s+ne.value-1;for(let S=s;S<=b;S++)Object.assign(e[S],{range:r.range,unelevated:!0,color:G.value,textColor:Z.value})}}),pe.value!==void 0){const r=s+pe.value.from-1,b=s+pe.value.to-1;for(let S=r;S<=b;S++)e[S].color=G.value,e[S].editRange=!0;pe.value.includeFrom===!0&&(e[r].editRangeFrom=!0),pe.value.includeTo===!0&&(e[b].editRangeTo=!0)}i.value.year===E.value.year&&i.value.month===E.value.month&&(e[s+E.value.day-1].today=!0);const p=e.length%7;if(p>0){const r=7-p;for(let b=1;b<=r;b++)e.push({i:b,fill:!0})}return e.forEach(r=>{let b="q-date__calendar-item ";r.fill===!0?b+="q-date__calendar-item--fill":(b+=`q-date__calendar-item--${r.in===!0?"in":"out"}`,r.range!==void 0&&(b+=` q-date__range${r.rangeTo===!0?"-to":r.rangeFrom===!0?"-from":""}`),r.editRange===!0&&(b+=` q-date__edit-range${r.editRangeFrom===!0?"-from":""}${r.editRangeTo===!0?"-to":""}`),(r.range!==void 0||r.editRange===!0)&&(b+=` text-${r.color}`)),r.classes=b}),e}),St=d(()=>a.disable===!0?{"aria-disabled":"true"}:{});he(()=>a.modelValue,e=>{if(D===JSON.stringify(e))D=0;else{const t=Xe(g.value,u.value);ve(t.year,t.month,t)}}),he(N,()=>{K.value!==null&&m.$el.contains(document.activeElement)===!0&&K.value.focus()}),he(()=>i.value.year+"|"+i.value.month,()=>{o("navigation",{year:i.value.year,month:i.value.month})}),he(Y,e=>{nt(e,u.value,"mask"),g.value=e}),he(ae,e=>{nt(g.value,e,"locale"),u.value=e});function Se(e){D=JSON.stringify(e)}function We(){const{year:e,month:t,day:n}=E.value,l={...i.value,year:e,month:t,day:n},s=Ve.value[se(l)];(s===void 0||s.includes(l.day)===!1)&&Oe(l),Me(l.year,l.month)}function Mt(e){vt(e)===!0&&(N.value=e)}function Pt(e,t){["month","year"].includes(e)&&(e==="month"?et:Ye)(t===!0?-1:1)}function Me(e,t){N.value="Calendar",ve(e,t)}function Yt(e,t){if(a.range===!1||!e){T.value=null;return}const n=Object.assign({...i.value},e),l=t!==void 0?Object.assign({...i.value},t):n;T.value={init:n,initHash:oe(n),final:l,finalHash:oe(l)},Me(n.year,n.month)}function Ge(){return a.calendar==="persian"?"YYYY/MM/DD":a.mask}function Pe(e,t,n){return xa(e,t,n,a.calendar,{hour:0,minute:0,second:0,millisecond:0})}function Xe(e,t){const n=Array.isArray(a.modelValue)===!0?a.modelValue:a.modelValue?[a.modelValue]:[];if(n.length===0)return Ze();const l=n[n.length-1],s=Pe(l.from!==void 0?l.from:l,e,t);return s.dateHash===null?Ze():s}function Ze(){let e,t;if(a.defaultYearMonth!==void 0){const n=a.defaultYearMonth.split("/");e=parseInt(n[0],10),t=parseInt(n[1],10)}else{const n=E.value!==void 0?E.value:H();e=n.year,t=n.month}return{year:e,month:t,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:e+"/"+ce(t)+"/01"}}function et(e){let t=i.value.year,n=Number(i.value.month)+e;n===13?(n=1,t++):n===0&&(n=12,t--),ve(t,n),ue.value===!0&&qe("month")}function Ye(e){const t=Number(i.value.year)+e;ve(t,i.value.month),ue.value===!0&&qe("year")}function Ot(e){ve(e,i.value.month),N.value=a.defaultView==="Years"?"Months":"Calendar",ue.value===!0&&qe("year")}function Ht(e){ve(i.value.year,e),N.value="Calendar",ue.value===!0&&qe("month")}function jt(e,t){const n=Ve.value[t];((n==null?void 0:n.includes(e.day))===!0?He:Oe)(e)}function ie(e){return{year:e.year,month:e.month,day:e.day}}function ve(e,t,n){if(A.value!==null&&e<=A.value.year&&((t<A.value.month||e<A.value.year)&&(t=A.value.month),e=A.value.year),L.value!==null&&e>=L.value.year&&((t>L.value.month||e>L.value.year)&&(t=L.value.month),e=L.value.year),n!==void 0){const{hour:s,minute:p,second:r,millisecond:b,timezoneOffset:S,timeHash:xe}=n;Object.assign(i.value,{hour:s,minute:p,second:r,millisecond:b,timezoneOffset:S,timeHash:xe})}const l=e+"/"+ce(t)+"/01";l!==i.value.dateHash&&(O.value=i.value.dateHash<l==(c.lang.rtl!==!0)?"left":"right",e!==i.value.year&&(k.value=O.value),lt(()=>{Q.value=e-e%ee-(e<0?ee:0),Object.assign(i.value,{year:e,month:t,day:1,dateHash:l})}))}function tt(e,t,n){const l=e!==null&&e.length===1&&a.multiple===!1?e[0]:e,{reason:s,details:p}=at(t,n);Se(l),o("update:modelValue",l,s,p)}function qe(e){const t=B.value[0]!==void 0&&B.value[0].dateHash!==null?{...B.value[0]}:{...i.value};lt(()=>{t.year=i.value.year,t.month=i.value.month;const n=a.calendar!=="persian"?new Date(t.year,t.month,0).getDate():Le(t.year,t.month);t.day=Math.min(Math.max(1,t.day),n);const l=me(t),{details:s}=at("",t);Se(l),o("update:modelValue",l,e,s)})}function at(e,t){return t.from!==void 0?{reason:`${e}-range`,details:{...ie(t.target),from:ie(t.from),to:ie(t.to)}}:{reason:`${e}-day`,details:ie(t)}}function me(e,t,n){return e.from!==void 0?{from:$e.value(e.from,t,n),to:$e.value(e.to,t,n)}:$e.value(e,t,n)}function Oe(e){let t;if(a.multiple===!0)if(e.from!==void 0){const n=oe(e.from),l=oe(e.to),s=B.value.filter(r=>r.dateHash<n||r.dateHash>l),p=U.value.filter(({from:r,to:b})=>b.dateHash<n||r.dateHash>l);t=s.concat(p).concat(e).map(r=>me(r))}else{const n=de.value.slice();n.push(me(e)),t=n}else t=me(e);tt(t,"add",e)}function He(e){if(a.noUnset===!0)return;let t=null;if(a.multiple===!0&&Array.isArray(a.modelValue)===!0){const n=me(e);e.from!==void 0?t=a.modelValue.filter(l=>l.from!==void 0?l.from!==n.from&&l.to!==n.to:!0):t=a.modelValue.filter(l=>l!==n),t.length===0&&(t=null)}tt(t,"remove",e)}function nt(e,t,n){const l=B.value.concat(U.value).map(p=>me(p,e,t)).filter(p=>p.from!==void 0?p.from.dateHash!==null&&p.to.dateHash!==null:p.dateHash!==null),s=(a.multiple===!0?l:l[0])||null;Se(s),o("update:modelValue",s,n)}function Ft(){if(a.minimal!==!0)return h("div",{class:"q-date__header "+C.value},[h("div",{class:"relative-position"},[h(we,{name:"q-transition--fade"},()=>h("div",{key:"h-yr-"+Re.value,class:"q-date__header-subtitle q-date__header-link "+(N.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:y.value,...f("vY",{onClick(){N.value="Years"},onKeyup(e){e.keyCode===13&&(N.value="Years")}})},[Re.value]))]),h("div",{class:"q-date__header-title relative-position flex no-wrap"},[h("div",{class:"relative-position col"},[h(we,{name:"q-transition--fade"},()=>h("div",{key:"h-sub"+Ue.value,class:"q-date__header-title-label q-date__header-link "+(N.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:y.value,...f("vC",{onClick(){N.value="Calendar"},onKeyup(e){e.keyCode===13&&(N.value="Calendar")}})},[Ue.value]))]),a.todayBtn===!0?h(I,{class:"q-date__header-today self-start",icon:c.iconSet.datetime.today,ariaLabel:c.lang.date.today,flat:!0,size:"sm",round:!0,tabindex:y.value,onClick:We}):null])])}function je({label:e,type:t,key:n,dir:l,goTo:s,boundaries:p,cls:r}){return[h("div",{class:"row items-center q-date__arrow"},[h(I,{round:!0,dense:!0,size:"sm",flat:!0,icon:De.value[0],ariaLabel:t==="Years"?c.lang.date.prevYear:c.lang.date.prevMonth,tabindex:y.value,disable:p.prev===!1,...f("go-#"+t,{onClick(){s(-1)}})})]),h("div",{class:"relative-position overflow-hidden flex flex-center"+r},[h(we,{name:"q-transition--jump-"+l},()=>h("div",{key:n},[h(I,{flat:!0,dense:!0,noCaps:!0,label:e,tabindex:y.value,...f("view#"+t,{onClick:()=>{N.value=t}})})]))]),h("div",{class:"row items-center q-date__arrow"},[h(I,{round:!0,dense:!0,size:"sm",flat:!0,icon:De.value[1],ariaLabel:t==="Years"?c.lang.date.nextYear:c.lang.date.nextMonth,tabindex:y.value,disable:p.next===!1,...f("go+#"+t,{onClick(){s(1)}})})])]}const Nt={Calendar:()=>[h("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[h("div",{class:"q-date__navigation row items-center no-wrap"},je({label:u.value.months[i.value.month-1],type:"Months",key:i.value.month,dir:O.value,goTo:et,boundaries:Te.value.month,cls:" col"}).concat(je({label:i.value.year,type:"Years",key:i.value.year,dir:k.value,goTo:Ye,boundaries:Te.value.year,cls:""}))),h("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Dt.value.map(e=>h("div",{class:"q-date__calendar-item"},[h("div",e)]))),h("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[h(we,{name:"q-transition--slide-"+O.value},()=>h("div",{key:W.value,class:"q-date__calendar-days fit"},Ke.value.map(e=>h("div",{class:e.classes},[e.in===!0?h(I,{class:e.today===!0?"q-date__today":"",dense:!0,flat:e.flat,unelevated:e.unelevated,color:e.color,textColor:e.textColor,label:e.i,tabindex:y.value,...f("day#"+e.i,{onClick:()=>{At(e.i)},onMouseover:()=>{Lt(e.i)}})},e.event!==!1?()=>h("div",{class:"q-date__event bg-"+e.event}):null):h("div",""+e.i)]))))])])],Months(){const e=i.value.year===E.value.year,t=l=>A.value!==null&&i.value.year===A.value.year&&A.value.month>l||L.value!==null&&i.value.year===L.value.year&&L.value.month<l,n=u.value.monthsShort.map((l,s)=>{const p=i.value.month===s+1;return h("div",{class:"q-date__months-item flex flex-center"},[h(I,{class:e===!0&&E.value.month===s+1?"q-date__today":null,flat:p!==!0,label:l,unelevated:p,color:p===!0?G.value:null,textColor:p===!0?Z.value:null,tabindex:y.value,disable:t(s+1),...f("month#"+s,{onClick:()=>{Ht(s+1)}})})])});return a.yearsInMonthView===!0&&n.unshift(h("div",{class:"row no-wrap full-width"},[je({label:i.value.year,type:"Years",key:i.value.year,dir:k.value,goTo:Ye,boundaries:Te.value.year,cls:" col"})])),h("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},n)},Years(){const e=Q.value,t=e+ee,n=[],l=s=>A.value!==null&&A.value.year>s||L.value!==null&&L.value.year<s;for(let s=e;s<=t;s++){const p=i.value.year===s;n.push(h("div",{class:"q-date__years-item flex flex-center"},[h(I,{key:"yr"+s,class:E.value.year===s?"q-date__today":null,flat:!p,label:s,dense:!0,unelevated:p,color:p===!0?G.value:null,textColor:p===!0?Z.value:null,tabindex:y.value,disable:l(s),...f("yr#"+s,{onClick:()=>{Ot(s)}})})]))}return h("div",{class:"q-date__view q-date__years flex flex-center"},[h("div",{class:"col-auto"},[h(I,{round:!0,dense:!0,flat:!0,icon:De.value[0],ariaLabel:c.lang.date.prevRangeYears(ee),tabindex:y.value,disable:l(e),...f("y-",{onClick:()=>{Q.value-=ee}})})]),h("div",{class:"q-date__years-content col self-stretch row items-center"},n),h("div",{class:"col-auto"},[h(I,{round:!0,dense:!0,flat:!0,icon:De.value[1],ariaLabel:c.lang.date.nextRangeYears(ee),tabindex:y.value,disable:l(t),...f("y+",{onClick:()=>{Q.value+=ee}})})])])}};function At(e){const t={...i.value,day:e};if(a.range===!1){jt(t,W.value);return}if(T.value===null){const n=Ke.value.find(s=>s.fill!==!0&&s.i===e);if(a.noUnset!==!0&&n.range!==void 0){He({target:t,from:n.range.from,to:n.range.to});return}if(n.selected===!0){He(t);return}const l=oe(t);T.value={init:t,initHash:l,final:t,finalHash:l},o("rangeStart",ie(t))}else{const n=T.value.initHash,l=oe(t),s=n<=l?{from:T.value.init,to:t}:{from:t,to:T.value.init};T.value=null,Oe(n===l?t:{target:t,...s}),o("rangeEnd",{from:ie(s.from),to:ie(s.to)})}}function Lt(e){if(T.value!==null){const t={...i.value,day:e};Object.assign(T.value,{final:t,finalHash:oe(t)})}}return Object.assign(m,{setToday:We,setView:Mt,offsetCalendar:Pt,setCalendarTo:Me,setEditingRange:Yt}),()=>{const e=[h("div",{class:"q-date__content col relative-position"},[h(we,{name:"q-transition--fade"},Nt[N.value])])],t=zt(v.default);return t!==void 0&&e.push(h("div",{class:"q-date__actions"},t)),a.name!==void 0&&a.disable!==!0&&z(e,"push"),h("div",{class:ke.value,...St.value},[Ft(),h("div",{ref:K,class:"q-date__main col column",tabindex:-1},e)])}}}),Pa=Ie({name:"QPopupProxy",props:{...da,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(a,{slots:v,emit:o,attrs:m}){const{proxy:c}=ft(),{$q:$}=c,f=V(!1),y=V(null),C=d(()=>parseInt(a.breakpoint,10)),{canShow:w}=va({showing:f});function H(){return $.screen.width<C.value||$.screen.height<C.value?"dialog":"menu"}const D=V(H()),F=d(()=>D.value==="menu"?{maxHeight:"99vh"}:{});he(()=>H(),g=>{f.value!==!0&&(D.value=g)});function z(g){f.value=!0,o("show",g)}function K(g){f.value=!1,D.value=H(),o("hide",g)}return Object.assign(c,{show(g){w(g)===!0&&y.value.show(g)},hide(g){y.value.hide(g)},toggle(g){y.value.toggle(g)}}),Wt(c,"currentComponent",()=>({type:D.value,ref:y.value})),()=>{const g={ref:y,...F.value,...m,onShow:z,onHide:K};let u;return D.value==="dialog"?u=Gt:(u=ma,Object.assign(g,{target:a.target,contextMenu:a.contextMenu,noParentEvent:!0,separateClosePopup:!0})),h(u,g,v.default)}}});const Ya={class:"q-pa-md"},Oa={class:"row items-center justify-end"},mt=re({__name:"DatePicker",props:{modelValue:String,label:String},emits:["update:modelValue"],setup(a,{emit:v}){const o=a;function m(y){v("update:modelValue",y)}const c=d(()=>`${new Date().getFullYear()-10}/01`),$=d(()=>{const y=Date.now();return wt.formatDate(y,"YYYY/MM/DD")});function f(y){return y<=$.value}return(y,C)=>(j(),J("div",Ya,[x(Xt,{filled:"","model-value":o.modelValue,"onUpdate:modelValue":m,mask:"date",rules:["date",w=>w<=$.value||"Date must not be in the future"],label:o.label},{append:M(()=>[x(Zt,{name:"event",class:"cursor-pointer"},{default:M(()=>[x(Pa,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:M(()=>[x(Ma,{"model-value":o.modelValue,"onUpdate:modelValue":m,"navigation-min-year-month":c.value,options:f},{default:M(()=>[_("div",Oa,[ht(x(I,{label:"Close",color:"primary",flat:""},null,512),[[gt]])])]),_:1},8,["model-value","navigation-min-year-month"])]),_:1})]),_:1})]),_:1},8,["model-value","rules","label"])]))}}),Ha={class:"q-pa-md"},ja={class:"text-h6",style:{"line-break":"anywhere"}},Fa=["href"],Na=_("img",{src:"img/external_link.png"},null,-1),Aa=[Na],La=re({__name:"PaymentsTable",setup(a){const v=be(),o=(q,O)=>Math.abs(q)>Math.abs(O)?1:-1,m=V(void 0),c=V([]),$=V(void 0),f=V(void 0),y=v.paymentsCurrentToken$.subscribe(q=>{m.value=q}),C=v.excludedPayments$.subscribe(q=>{c.value=q}),w=v.selectedToken$.subscribe(q=>{$.value=q}),H=v.paymentList$.subscribe(q=>{f.value=q.data}),D=d(()=>m.value&&c.value.length===m.value.payments.length);function F(q){return q&&c.value.filter(O=>O.hash===q).length>0}ge(()=>{y.unsubscribe(),C.unsubscribe(),w.unsubscribe(),H.unsubscribe()});const z=d(()=>{var q,O,k;return[{name:"Date",required:!0,label:"Date",align:"left",field:P=>fa(P.date*1e3),sortable:!0},{name:"block",align:"right",label:"Block",field:"block",sortable:!0},{name:"transfer",align:"right",label:`Amount (${($.value||"").toUpperCase()})`,field:"amount",format:P=>N.value.format(Math.abs(P)),sort:o,sortable:!0},{name:"transferFrom",align:"center",label:"from",field:"from",format:P=>P.substring(0,10)+"...",sort:o,sortable:!0},{name:"transferTo",align:"center",label:"to",field:"to",format:P=>P.substring(0,10)+"...",sortable:!0},{name:"price",align:"right",label:`Price (${(q=f.value)==null?void 0:q.currency})`,field:"price",format:P=>Fe(P),sortable:!0},{name:"value",align:"right",label:`Value (${(O=f.value)==null?void 0:O.currency})`,field:"value",format:P=>Fe(Math.abs(P)),sort:o,sortable:!0},{name:"valueNow",align:"right",label:`Value now (${(k=f.value)==null?void 0:k.currency})`,field:"valueNow",format:P=>Fe(Math.abs(P)),sort:o,sortable:!0},{name:"functionName",align:"left",label:"Function",field:"functionName",sortable:!1},{name:"tx",align:"center",label:"Transaction",field:"hash",format:P=>{var Q;return wa(P,((Q=f.value)==null?void 0:Q.chain)||"")},sortable:!1}]}),K=d(()=>{var q;return((q=m.value)==null?void 0:q.payments)||[]});function g(){v.toggleAllExcludedPayments()}function u(q){v.toggleExcludedPayment(q)}const Y=V({sortBy:"block",descending:!0,page:1,rowsPerPage:10});function ae(){var Q;const q=new st,O=c.value.map(T=>T.hash),k=[...((Q=m.value)==null?void 0:Q.payments)||[]].filter(T=>O.indexOf(T.hash)===-1).map(T=>({"Koinly Date":Ne(T.date*1e3),Amount:T.amount,Currency:$.value,TxHash:T.hash})),P=q.parse(k);Ae.exports.saveAs(new Blob([P],{type:"text/plain;charset=utf-8"}),"payments.csv")}function E(){var Q,T,ke,G,Z,ue,de,B;const q=new st,O=c.value.map(U=>U.hash),k=[...((Q=m.value)==null?void 0:Q.payments)||[]].filter(U=>O.indexOf(U.hash)===-1).map(U=>({...U,date:Ne(U.date*1e3)}));k[0]={Token:$.value,Chain:(T=f.value)==null?void 0:T.chain,Currency:(ke=f.value)==null?void 0:ke.currency,"Wallet address":(G=f.value)==null?void 0:G.address,...k[0],totalAmount:(Z=m.value)==null?void 0:Z.summary.amount,totalValue:(ue=m.value)==null?void 0:ue.summary.value,totalValueNow:(B=(de=m.value)==null?void 0:de.summary)==null?void 0:B.valueNow};const P=q.parse(k);Ae.exports.saveAs(new Blob([P],{type:"text/plain;charset=utf-8"}),"payments.csv")}function i(){const q=c.value.map(k=>k.hash),O=m.value.payments.filter(k=>q.indexOf(k.hash)===-1).map(k=>({...k,date:Ne(k.date*1e3)}));Ae.exports.saveAs(new Blob([JSON.stringify({...m.value||{},values:O})],{type:"text/plain;charset=utf-8"}),"payments.json")}const N=d(()=>xt(4));return(q,O)=>(j(),J("div",Ha,[x(ha,{rows:K.value,columns:z.value,"row-key":"block","no-data-label":"No payments found",pagination:Y.value,selection:"multiple",selected:c.value,"onUpdate:selected":O[0]||(O[0]=k=>c.value=k)},{"header-selection":M(()=>[X(" Excluded "),x(ot,{"model-value":D.value,"onUpdate:modelValue":g},null,8,["model-value"])]),"body-selection":M(k=>[x(ot,{"model-value":F(k.row.hash),"onUpdate:modelValue":()=>u(k.row.hash)},null,8,["model-value","onUpdate:modelValue"])]),top:M(()=>{var k;return[_("span",ja,"Transfers ("+R(($.value||"").toUpperCase())+" on "+R((k=f.value)==null?void 0:k.chain)+")",1),x(ya),x(I,{color:"primary",class:"q-mr-sm",onClick:E},{default:M(()=>[X("Export CSV ")]),_:1}),x(I,{color:"primary",class:"q-mr-sm",onClick:ae},{default:M(()=>[X("Koinly-friendly CSV ")]),_:1}),x(I,{color:"primary",onClick:i},{default:M(()=>[X("Export JSON")]),_:1})]}),"body-cell":M(k=>[k.col.name!=="tx"?(j(),ye(it,{key:0,props:k,style:yt({color:k.row.amount<0?"red":void 0})},{default:M(()=>[X(R(k.value),1)]),_:2},1032,["props","style"])):te("",!0),k.col.name==="tx"?(j(),ye(it,{key:1,class:"text-center"},{default:M(()=>[_("a",{href:k.value,target:"_blank"},Aa,8,Fa)]),_:2},1024)):te("",!0)]),_:1},8,["rows","columns","pagination","selected"])]))}}),Ea=_("div",{class:"text-h6"},"Transfers summary",-1),Ba={class:"q-my-lg q-mx-auto"},Ia=_("td",{class:"text-left q-pa-sm"},"Chain:",-1),Qa={class:"text-right q-pa-sm"},Ua=_("td",{class:"text-left q-pa-sm"},"Token:",-1),Ra={class:"text-right q-pa-sm"},Ja=_("td",{class:"text-left q-pa-sm"},"Total transfers:",-1),za={class:"text-right q-pa-sm"},Ka=_("td",{class:"text-left q-pa-sm"},"Value at time of transaction(s):",-1),Wa={class:"text-right q-pa-sm"},Ga=_("td",{class:"text-left q-pa-sm"},"Value now:",-1),Xa={class:"text-right q-pa-sm"},Za=_("td",{class:"text-left q-pa-sm"},"Current price:",-1),en={class:"text-right q-pa-sm"},tn=re({__name:"PaymentsSummary",setup(a){const v=be(),o=V(void 0),m=V(void 0),c=V(void 0),$=v.paymentList$.subscribe(D=>{o.value=D.data}),f=v.paymentsCurrentToken$.subscribe(D=>{m.value=D}),y=v.selectedToken$.subscribe(D=>{c.value=D});ge(()=>{$.unsubscribe(),f.unsubscribe(),y.unsubscribe()});function C(D){var F;return isNaN(D)?"-":rt((F=o.value)==null?void 0:F.currency).format(D)}function w(D){var F;return D===void 0||isNaN(D)?"-":rt((F=o.value)==null?void 0:F.currency).format(D)}function H(D){return isNaN(D)?"-":xt(4).format(D)}return(D,F)=>{var z,K,g,u,Y,ae,E,i;return j(),J(Qe,null,[Ea,_("table",Ba,[_("tr",null,[Ia,_("td",Qa,R((z=o.value)==null?void 0:z.chain),1)]),_("tr",null,[Ua,_("td",Ra,R((c.value||"").toUpperCase()),1)]),_("tr",null,[Ja,_("td",za,R(H(((g=(K=m.value)==null?void 0:K.summary)==null?void 0:g.amount)||0)+" "+(c.value||"").toUpperCase()),1)]),_("tr",null,[Ka,_("td",Wa,R(C(((Y=(u=m.value)==null?void 0:u.summary)==null?void 0:Y.value)||0)),1)]),_("tr",null,[Ga,_("td",Xa,R(C(((E=(ae=m.value)==null?void 0:ae.summary)==null?void 0:E.valueNow)||0)),1)]),_("tr",null,[Za,_("td",en,R(w(((i=m.value)==null?void 0:i.currentPrice)||0)),1)])])],64)}}}),an={class:"q-pa-md"},nn=re({__name:"PaymentsFilterDropdown",setup(a){const v=V(["All transfers","Outgoing transfers only","Incoming transfers only"]),o=be(),m=V(void 0),c=o.paymentsFilter$.subscribe(f=>{m.value=f});ge(()=>{c.unsubscribe()});function $(f){o.setPaymentsFilter(f)}return(f,y)=>(j(),J("div",an,[x(oa,{label:m.value,push:"","no-caps":""},{default:M(()=>[x(ga,null,{default:M(()=>[(j(!0),J(Qe,null,ea(Object.values(v.value),C=>ht((j(),ye(_t,{key:C,clickable:"",onClick:w=>$(C)},{default:M(()=>[x(pt,null,{default:M(()=>[x(Be,null,{default:M(()=>[X(R(C),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[gt]])),128))]),_:1})]),_:1},8,["label"])]))}}),ln={class:"q-pa-md",style:{flex:"auto","max-width":"200px"}},on=re({__name:"TokenFilterDropdown",setup(a){const v=be(),o=V(void 0),m=V(void 0),c=v.selectedToken$.subscribe(w=>o.value=w),$=v.paymentList$.subscribe(w=>m.value=w.data);ge(()=>{c.unsubscribe(),$.unsubscribe()});const f=d(()=>{var w;return Object.keys(((w=m.value)==null?void 0:w.tokens)||{}).sort((H,D)=>H>D?1:-1)});function y(w){return w.toUpperCase()}function C(w){v.selectToken(w)}return(w,H)=>(j(),J("div",ln,[x(bt,{filled:"","model-value":o.value,"onUpdate:modelValue":C,options:f.value,label:"Token","option-label":y,"stack-label":""},null,8,["model-value","options"])]))}}),sn={key:0,class:"row justify-center items-center"},rn={key:1,class:"table q-my-md"},un={key:2,class:"justify-around items-center column"},cn={key:3},dn=_("div",{class:"text-h6 text-center"},"No transfers found",-1),vn=[dn],mn=re({__name:"TokenTransfers",setup(a){const v=be(),o=V(void 0),m=v.paymentsCurrentToken$.subscribe(c=>{o.value=c});return ge(()=>{m.unsubscribe()}),(c,$)=>(j(),J(Qe,null,[o.value?(j(),J("div",sn,[x(on),x(nn)])):te("",!0),o.value?(j(),J("div",rn,[x(La)])):te("",!0),o.value?(j(),J("div",un,[x(tn)])):te("",!0),o.value===void 0?(j(),J("div",cn,vn)):te("",!0)],64))}}),fn={class:"q-my-md flex justify-between align-center items-center column-md row-lg row-xl column-xs column-sm"},hn={class:"dropdown"},yn={class:"dropdown"},gn={class:"dropdown"},bn={class:"dropdown"},_n={key:2,class:"q-my-xl"},pn=_("div",{class:"text-h6 text-center"}," \u26A0 This is an Alpha version and subject to change \u26A0 ",-1),xn=_("div",{class:"text-h6 text-center"},[X(" Export your transfers and swaps as CSV or JSON. "),_("br"),X(" This information can be useful for taxation of air drops, LP rewards, trades and other payments. ")],-1),wn=_("div",{class:"text-h6 text-center q-mt-md"}," Polkadot SDK chains, Ethereum chains (L1/L2) and fiat currencies are supported. ",-1),kn=_("div",{class:"text-h6 text-center"}," Select a network, a fiat currency, a time frame and enter your wallet address. Then press submit. ",-1),Cn=_("div",{class:"text-center q-my-md"}," This software comes without warranty. Please verify the exported results. ",-1),Dn={class:"q-mx-auto text-center"},Vn=["src"],Yn=re({__name:"TransfersAndSwaps",setup(a){const v=sa(),o=be(),m=V("payments"),c=V(""),$=V(void 0),f=V([]),y=V(void 0);o.chain$.pipe(ra(1)).subscribe(g=>y.value=g);const C=o.chainList$.subscribe(g=>{f.value=g}),w=o.paymentList$.subscribe(async g=>{if($.value=g.data,g.pending)v.loading.show({message:"Fetching transfers. This may take a while. Please be patient...",html:!0,boxClass:"bg-grey-2 text-grey-9",spinnerColor:"primary"});else if(g.error){v.loading.hide();const u=g.error,Y=await u.text(),ae=u.status&&(u.status===429||u.status===503)?"Too many requests. Please try again in some minutes":Y||"There was an error fetching your data. Please try again later";v.dialog({title:u.status&&u.status===429?"Request limit exceeded":u.status&&u.status===503?"Server overloaded":"An error occurred",message:ae,persistent:!0})}else v.loading.hide()});ge(()=>{w.unsubscribe(),C.unsubscribe()});function H(){F.value||o.fetchTransfers()}function D(g){o.selectChain(g)}const F=d(()=>o.address.trim()===""||!o.currency||!y.value||!z());function z(){const g=Date.now();c.value="";const u=wt.formatDate(g,"YYYY/MM/DD");return o.startDate<=u&&o.endDate<=u?o.startDate>o.endDate?(c.value="End date must not be before start date",!1):!0:!1}const K=V("img/dollar-4932316_1280.jpg");return(g,u)=>(j(),ye(ua,{class:"q-px-sm q-mx-auto content"},{default:M(()=>[_("div",fn,[_("div",hn,[x(Da,{modelValue:y.value,"onUpdate:modelValue":[u[0]||(u[0]=Y=>y.value=Y),D],chains:f.value},null,8,["modelValue","chains"])]),_("div",yn,[x(ia,{modelValue:le(o).currency,"onUpdate:modelValue":u[1]||(u[1]=Y=>le(o).currency=Y)},null,8,["modelValue"])]),_("div",gn,[x(mt,{modelValue:le(o).startDate,"onUpdate:modelValue":[u[2]||(u[2]=Y=>le(o).startDate=Y),z],label:"Start date"},null,8,["modelValue"])]),_("div",bn,[x(mt,{modelValue:le(o).endDate,"onUpdate:modelValue":[u[3]||(u[3]=Y=>le(o).endDate=Y),z],label:"End date"},null,8,["modelValue"]),_("div",{style:yt([{opacity:c.value?1:0},{color:"red","margin-top":"-12px",position:"absolute"}]),class:"q-ml-md q-field--error"}," \u24D8 "+R(c.value),5)]),x(ca,{modelValue:le(o).address,"onUpdate:modelValue":u[4]||(u[4]=Y=>le(o).address=Y)},null,8,["modelValue"]),x(I,{color:"primary",label:"Submit",onClick:H,disable:F.value},null,8,["disable"])]),x(la,{modelValue:m.value,"onUpdate:modelValue":u[5]||(u[5]=Y=>m.value=Y),dense:"",align:"center",class:"bg-primary text-white shadow-2",breakpoint:0},{default:M(()=>[x(ct,{name:"payments",label:"Transfers"}),x(ct,{name:"swaps",label:"Swaps"})]),_:1},8,["modelValue"]),_("div",null,[$.value!==void 0&&m.value==="payments"?(j(),ye(mn,{key:0})):te("",!0),$.value!==void 0&&m.value==="swaps"?(j(),ye(ka,{key:1})):te("",!0),$.value===void 0?(j(),J("div",_n,[pn,xn,wn,kn,Cn,_("div",Dn,[_("img",{src:K.value,style:{"max-width":"40%"}},null,8,Vn)])])):te("",!0)])]),_:1}))}});export{Yn as default};
