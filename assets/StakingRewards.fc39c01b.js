var De=Object.defineProperty;var Ve=(a,t,e)=>t in a?De(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var X=(a,t,e)=>(Ve(a,typeof t!="symbol"?t+"":t,e),e);import{X as N,r as b,D as x,Y as D,G as v,F as g,Z as he,$ as we,I as P,a0 as C,w as Z,n as Se,o as Pe,h as Ne,b8 as Te,av as Fe,a as $,B as J,E as H,ah as T,ae as S,H as f,a8 as B,af as ye,ag as qe,K as Ie,b9 as Re,_ as Ae}from"./index.1d03841b.js";import{E as Oe,Q as je,C as Le,u as Ee,t as Ue,a as Qe,_ as ze,b as Be}from"./use-quasar.23d2b34c.js";import{v as ge,x as W,n as E,H as Y,y as Me,I as Ke,r as re,o as le,z as Ge,K as Je,Q as _e,a as ie,b as ue,c as K,f as G,A as He,B as We,R as Ye,L as Xe,M as Ze,D as et,N as be,P as ee,t as tt,h as at,i as nt,J as de,j as te,F as ae,T as me,l as ot,m as st}from"./fetch-subscan-chains.c67a68d7.js";import"./rtl.276c3f1b.js";function rt(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];var e=ge(a);return W(a,e)}function lt(a,t,e,n,o,s,i,d){var r=[],h=0,k=0,_=!1,u=function(){_&&!r.length&&!h&&t.complete()},c=function(p){return h<n?l(p):r.push(p)},l=function(p){s&&t.next(p),h++;var w=!1;Y(e(p,k++)).subscribe(E(t,function(m){o==null||o(m),s?c(m):t.next(m)},function(){w=!0},void 0,function(){if(w)try{h--;for(var m=function(){var y=r.shift();i?Me(t,i,function(){return l(y)}):l(y)};r.length&&h<n;)m();u()}catch(y){t.error(y)}}))};return a.subscribe(E(t,c,function(){_=!0,u()})),function(){d==null||d()}}function xe(a,t,e){return e===void 0&&(e=1/0),Ke(t)?xe(function(n,o){return re(function(s,i){return t(n,s,o,i)})(Y(a(n,o)))},e):(typeof t=="number"&&(e=t),le(function(n,o){return lt(n,o,a,e)}))}function it(a){return a===void 0&&(a=1/0),xe(Ge,a)}function ut(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];var e=ge(a),n=Je(a,1/0),o=a;return o.length?o.length===1?Y(o[0]):it(n)(W(o,e)):Oe}function ct(a,t){return le(function(e,n){var o=0;e.subscribe(E(n,function(s){return a.call(t,s,o++)&&n.next(s)}))})}function dt(a,t){return le(function(e,n){var o=null,s=0,i=!1,d=function(){return i&&!o&&n.complete()};e.subscribe(E(n,function(r){o==null||o.unsubscribe();var h=0,k=s++;Y(a(r,k)).subscribe(o=E(n,function(_){return n.next(t?t(r,_,k,h++):_)},function(){o=null,d()}))},function(){i=!0,d()}))})}const mt={class:"q-pa-md"},vt=N({__name:"TokenDropdown",props:{modelValue:Object,chains:Array},emits:["update:modelValue"],setup(a,{emit:t}){const e=a,n=b([]);function o(i){t("update:modelValue",i)}function s(i,d){if(i.trim()===""){d(()=>{n.value=e.chains||[]});return}d(()=>{const r=i.toLowerCase();n.value=(e.chains||[]).filter(h=>h.label.toLowerCase().indexOf(r)>-1||h.domain.toLowerCase().indexOf(r)>-1||h.token.toLowerCase().indexOf(r)>-1)})}return(i,d)=>(x(),D("div",mt,[v(_e,{filled:"",onFilter:s,"use-input":"",modelValue:e.modelValue,label:e.modelValue?e.modelValue.label:"Blockchain",options:n.value,"option-value":"chain","option-label":"token",color:"teal","onUpdate:modelValue":o,clearable:"","options-selected-class":"text-deep-orange"},{option:g(r=>[v(ie,he(we(r.itemProps)),{default:g(()=>[v(ue,null,{default:g(()=>[v(K,null,{default:g(()=>[P(C(r.opt.label||r.opt.domain),1)]),_:2},1024),v(K,{caption:""},{default:g(()=>[P(C(r.opt.token),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","label","options"])]))}}),ve="https://www.gstatic.com/charts/loader.js";let ne=null;const oe=new Map;function ft(){return window.google!==void 0?Promise.resolve(window.google.charts):(ne===null&&(ne=new Promise(a=>{const t=document.querySelector('script[src="'.concat(ve,'"]')),e=t||document.createElement("script");t||(e.src=ve,e.type="text/javascript",document.head.append(e)),e.onload=()=>{window.google!==void 0&&a(window.google.charts)}})),ne)}async function pt(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"current",{packages:t=["corechart","controls"],language:e="en",mapsApiKey:n}=arguments.length>1?arguments[1]:void 0;const o=await ft(),s="".concat(a,"_").concat(t.join("_"),"_").concat(e);if(oe.has(s))return oe.get(s);const i=new Promise(d=>{o.load(a,{packages:t,language:e,mapsApiKey:n}),o.setOnLoadCallback(()=>d(window.google))});return oe.set(s,i),i}function ht(a,t,e){return a!==null&&t instanceof a.visualization.DataTable||a!==null&&t instanceof a.visualization.DataView?t:a!==null&&Array.isArray(t)?a.visualization.arrayToDataTable(t,e):a!==null&&t!==null&&typeof t=="object"?new a.visualization.DataTable(t):null}function fe(a,t,e,n,o,s){const i=(r,h,k)=>{if(k===void 0)throw new Error("please, provide chart type property");return new h.visualization[k](r)};if(a===null)throw new Error("please, provide charts lib property");if(e===null)throw new Error("please, provide chart element property");return t=(s||i)(e,a,n),wt(a,t,o),t}function wt(a,t,e){if(e!==null)for(const[n,o]of Object.entries(e))a!==null&&t!==null&&a.visualization.events.addListener(t,n,o)}function pe(a){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:50,e;function n(){return t}return function(){for(var s=arguments.length,i=new Array(s),d=0;d<s;d++)i[d]=arguments[d];const r=this,h=function(){e=void 0,a.apply(r,i)};e!==void 0&&clearTimeout(e),e=setTimeout(h,n())}}let L=null;const ke=N({name:"GChart",props:{type:{type:String,required:!0},data:{type:[Array,Object,null],default:()=>[]},isFirstRowLabels:{type:Boolean,default:!1},options:{type:Object,default:()=>({})},version:{type:String,default:"current"},settings:{type:Object,default:()=>({packages:["corechart","table"]})},events:{type:Object,default:null},createChart:{type:Function,default:void 0},resizeDebounce:{type:Number,default:200}},setup(a,t){let{emit:e}=t;const n=b(null),o=b(null);function s(){if(L===null||n.value===null)return;const i=ht(L,a.data,a.isFirstRowLabels);if(i!==null){var d;(d=n.value)===null||d===void 0||d.draw(i,a.options)}}return Z(()=>a.data,()=>s(),{deep:!0}),Z(()=>a.options,()=>s(),{deep:!0}),Z(()=>a.type,()=>{n.value=fe(L,n.value,o.value,a.type,a.events,a.createChart),s()}),Se(()=>{pt(a.version,a.settings).then(i=>{i!==void 0&&(L=i,n.value=fe(L,n.value,o.value,a.type,a.events,a.createChart),e("ready",n.value,i),s())}),a.resizeDebounce>0&&window.addEventListener("resize",pe(s,a.resizeDebounce))}),Pe(()=>{n.value!==null&&typeof n.value.clearChart=="function"&&n.value.clearChart(),a.resizeDebounce>0&&window.removeEventListener("resize",pe(s,a.resizeDebounce))}),()=>Ne("div",{ref:o},[])}}),Ce=Te({});function yt(){Ce.component("GChart",ke)}const gt={version:"1.1.0",install:yt};let se=null;typeof window!="undefined"&&(se=window.Vue);se!=null&&Ce.use(gt);class $e{constructor(t){X(this,"pending",!0);this.data=t}}class _t{constructor(t){X(this,"pending",!1);this.data=t}}const bt=()=>re(a=>({data:a,pending:!1})),xt=async a=>{if(a!=="polkadot"&&a!=="kusama")return[];const t=await fetch(`https://${a}.api.subscan.io/api/scan/nomination_pool/pools`,{method:"POST",body:JSON.stringify({})});if(!t.ok)throw t;return(await t.json()).data.list},kt=async(a,t,e,n,o,s)=>{const i=await fetch(`/api/staking-rewards/${a.toLowerCase()}/${t}?startdate=${o}&enddate=${s}&currency=${e}${n!==void 0?"&poolid="+n:""}`,{method:"GET"});if(!i.ok)throw i;return i.json()},Ct=(a,t)=>a.map(e=>({...e,isoDate:G(e.date*1e3),valueNow:t!==void 0?e.amount*t:void 0})),$t=a=>a.reduce((t,e)=>({amount:t.amount+e.amount,value:t.value===void 0||e.value===void 0?void 0:t.value+e.value,valueNow:t.valueNow===void 0||e.valueNow===void 0?void 0:t.valueNow+e.valueNow}),{amount:0,value:0,valueNow:0});function Dt(a){return a.reduce((t,e)=>{t[e.isoDate]||(t[e.isoDate]={amount:0,value:0,valueNow:0});const n=t[e.isoDate];return t[e.isoDate].amount+=e.amount,t[e.isoDate].value=n.value!==void 0&&e.value!==void 0?n.value+e.value:void 0,t[e.isoDate].valueNow=n.valueNow!==void 0&&e.valueNow!==void 0?n.valueNow+e.valueNow:void 0,t},{})}const Vt=W(He()).pipe(re(a=>({chains:a.chains.filter(t=>t.stakingPallets.length>0)}))),M=new We({domain:"polkadot",label:"Polkadot",token:"DOT"}),St=M.pipe(ct(a=>!!a),dt(a=>ut(rt(new $e([])),W(xt(a.domain)).pipe(bt())))),Q=new Ye(1),Pt=a=>a.values.sort((t,e)=>t.block-e.block),U=Fe("rewards",{state:()=>({rewards$:Q.asObservable(),nominationPoolId:void 0,currency:"USD",address:"",timeFrame:"This Month",chainList$:Vt,chain$:M.asObservable(),nominationPools$:St}),actions:{selectChain(a){M.next(a)},async fetchRewards(){try{Q.next(new $e(void 0));const a=Xe(this.timeFrame),t=Ze(this.timeFrame),e=(await et(M)).domain,n=await kt(e,this.address.trim(),this.currency,this.nominationPoolId,a,t),o=Ct(n.values,n.currentPrice),s={values:o,summary:$t(o),nominationPoolId:this.nominationPoolId,currentPrice:n.currentPrice,timeFrame:this.timeFrame,startDate:a,endDate:t,chain:e,token:n.token,currency:this.currency,address:this.address,dailyValues:Dt(o)};Pt(s),Q.next(new _t(s))}catch(a){Q.next({pending:!1,error:a,data:void 0})}}}}),z=N({__name:"RewardsChart",props:{currency:Boolean,chartType:String},setup(a){const t=a,e=U(),n=b(void 0),o=e.rewards$.subscribe(r=>{n.value=r.data}),s=$(()=>{var r;return(((r=n.value)==null?void 0:r.values)||[]).length!==0});J(()=>{o.unsubscribe()});const i=$(()=>{var l,p,w,m,y,V;const r=t.currency?[["date","Value at payout time","Value now"]]:[["date","Amount"]],h=n.value.values[0].isoDate,k=n.value.values[n.value.values.length-1].isoDate,_=new Date(h);_.setHours(0),_.setMilliseconds(0),_.setSeconds(0);const u=[];let c=G(_.getTime());do c=G(_.getTime()),u.push(t.currency?[new Date(c+":00:00:00"),((p=(l=n.value)==null?void 0:l.dailyValues[c])==null?void 0:p.value)||0,((m=(w=n.value)==null?void 0:w.dailyValues[c])==null?void 0:m.valueNow)||0]:[new Date(c+":00:00:00"),((V=(y=n.value)==null?void 0:y.dailyValues[c])==null?void 0:V.amount)||0]),_.setDate(_.getDate()+1);while(c!==k);return[...r,...u]}),d=$(()=>({title:`Rewards (${t.currency?n.value.currency:n.value.token})`,curveType:n.value.values.length>50?"function":void 0,legend:{position:"top"},hAxis:{title:"Date"},vAxis:{minValue:0},axisTitlesPosition:"out"}));return(r,h)=>s.value?(x(),H(T(ke),{key:0,data:i.value,type:a.chartType,options:d.value,style:{width:"100%","min-height":"400px"}},null,8,["data","type","options"])):S("",!0)}}),Nt={class:"q-pa-md"},Tt={class:"text-h6",style:{"line-break":"anywhere"}},Ft=f("br",null,null,-1),qt={class:"text-h6",style:{"line-break":"anywhere"}},It=N({__name:"StakingRewardsTable",setup(a){const t=U(),e=b(void 0),n=t.rewards$.subscribe(l=>{e.value=l.data});J(()=>{n.unsubscribe()});const o=$(()=>e.value?be(e.value.timeFrame):""),s=$(()=>{var l,p,w;return[{name:"date",required:!0,label:"Date",align:"left",field:m=>G(m.date*1e3),sortable:!0},{name:"block",align:"right",label:"Block",field:"block",sortable:!0},{name:"reward",align:"right",label:`Reward (${r.value})`,field:"amount",format:m=>c.value.format(m),sortable:!0},{name:"price",align:"right",label:`Price (${(l=e.value)==null?void 0:l.currency})`,field:"price",format:m=>ee.format(m),sortable:!0},{name:"value",align:"right",label:`Value (${(p=e.value)==null?void 0:p.currency})`,field:"value",format:m=>ee.format(m),sortable:!0},{name:"valueNow",align:"right",label:`Value now (${(w=e.value)==null?void 0:w.currency})`,field:"valueNow",format:m=>ee.format(m),sortable:!0}]}),i=$(()=>{var l;return(l=e.value)==null?void 0:l.values}),d=$(()=>{var p;let l=0;return(p=e.value)==null||p.values.forEach(w=>{const m=w.amount.toString().split(".");if(m.length<2)return 0;const y=m[1].length;y>l&&(l=y)}),l}),r=$(()=>{var l;return(l=e.value)==null?void 0:l.token}),h=b({sortBy:"block",descending:!0,page:1,rowsPerPage:10});function k(){var m,y,V,F,q,I,R,A,O,j;const l=new de,p=[...((m=e.value)==null?void 0:m.values)||[]].map(ce=>({...ce,utcDate:te(ce.date*1e3)}));p[0]={"Reward token":(y=e.value)==null?void 0:y.token,Chain:(V=e.value)==null?void 0:V.chain,Currency:(F=e.value)==null?void 0:F.currency,"Wallet address":(q=e.value)==null?void 0:q.address,"NominationPool Id":((I=e.value)==null?void 0:I.nominationPoolId)||"",...p[0],totalAmount:(R=e.value)==null?void 0:R.summary.amount,totalValue:(A=e.value)==null?void 0:A.summary.value,totalValueNow:(j=(O=e.value)==null?void 0:O.summary)==null?void 0:j.valueNow};const w=l.parse(p);ae.exports.saveAs(new Blob([w],{type:"text/plain;charset=utf-8"}),"staking-rewards.csv")}function _(){var m;const l=new de,p=[...((m=e.value)==null?void 0:m.values)||[]].map(y=>{var V;return{"Koinly Date":te(y.date*1e3),Amount:y.amount,Currency:(V=e.value)==null?void 0:V.token,TxHash:y.hash}}),w=l.parse(p);ae.exports.saveAs(new Blob([w],{type:"text/plain;charset=utf-8"}),"staking-rewards.csv")}function u(){var w,m,y,V,F,q,I,R,A,O;const l=[...((w=e.value)==null?void 0:w.values)||[]].map(j=>({...j,date:te(j.date*1e3)})),p={"Reward token":(m=e.value)==null?void 0:m.token,Chain:(y=e.value)==null?void 0:y.chain,Currency:(V=e.value)==null?void 0:V.currency,"Wallet address":(F=e.value)==null?void 0:F.address,"NominationPool Id":((q=e.value)==null?void 0:q.nominationPoolId)||"",totalAmount:(I=e.value)==null?void 0:I.summary.amount,totalValue:(R=e.value)==null?void 0:R.summary.value,totalValueNow:(O=(A=e.value)==null?void 0:A.summary)==null?void 0:O.valueNow};ae.exports.saveAs(new Blob([JSON.stringify({summary:p,values:l})],{type:"text/plain;charset=utf-8"}),"staking-rewards.json")}const c=$(()=>tt(d.value));return(l,p)=>(x(),D("div",Nt,[v(at,{rows:i.value,columns:s.value,"row-key":"name","no-data-label":"No rewards found",pagination:h.value},{top:g(()=>{var w,m;return[f("div",null,[f("span",Tt,"Rewards ("+C((w=e.value)==null?void 0:w.chain)+") - "+C(o.value),1),Ft,f("span",qt,"Address "+C((m=e.value)==null?void 0:m.address),1)]),v(nt),v(B,{color:"primary",class:"q-mr-sm",onClick:k},{default:g(()=>[P("Export CSV ")]),_:1}),v(B,{color:"primary",class:"q-mr-sm",onClick:_},{default:g(()=>[P("Koinly-friendly CSV ")]),_:1}),v(B,{color:"primary",onClick:u},{default:g(()=>[P("Export JSON")]),_:1})]}),_:1},8,["rows","columns","pagination"])]))}}),Rt={class:"q-pa-md"},At=N({__name:"TimeFrameDropdown",props:{modelValue:String},emits:["update:modelValue"],setup(a,{emit:t}){const e=a;function n(i){t("update:modelValue",i)}const o=$(()=>e.modelValue!==void 0?me[e.modelValue]:""),s=b(me);return(i,d)=>(x(),D("div",Rt,[v(je,{label:o.value,push:"","no-caps":""},{default:g(()=>[v(ot,null,{default:g(()=>[(x(!0),D(ye,null,qe(Object.keys(s.value),r=>Ie((x(),H(ie,{key:r,label:s.value[r],clickable:"",onClick:h=>n(r)},{default:g(()=>[v(ue,null,{default:g(()=>[v(K,null,{default:g(()=>[P(C(s.value[r]),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["label","onClick"])),[[Le]])),128))]),_:1})]),_:1},8,["label"])]))}}),Ot={class:"text-h6"},jt={key:0,class:"q-my-lg q-mx-auto"},Lt=f("td",{class:"text-left q-pa-sm"},"Total rewards:",-1),Et={class:"text-right q-pa-sm"},Ut=f("td",{class:"text-left q-pa-sm"},"Average rewards per day:",-1),Qt={class:"text-right q-pa-sm"},zt=f("td",{class:"text-left q-pa-sm"},"Value at payout time:",-1),Bt={class:"text-right q-pa-sm"},Mt=f("td",{class:"text-left q-pa-sm"},"Value now:",-1),Kt={class:"text-right q-pa-sm"},Gt=f("td",{class:"text-left q-pa-sm"},"Current price:",-1),Jt={class:"text-right q-pa-sm"},Ht={key:1},Wt=["href"],Yt=N({__name:"RewardSummary",setup(a){const t=U(),e=b(void 0);t.rewards$.subscribe(r=>{e.value=r.data});const n=$(()=>t.rewards$?e.value.summary.amount/(e.value.endDate-e.value.startDate)*24*60*60*1e3:0),o=$(()=>e.value?be(e.value.timeFrame):"");function s(r){return isNaN(r)?"?":new Intl.NumberFormat(navigator.language||"en-US",{style:"currency",currency:e.value.currency.toUpperCase()}).format(r)}function i(r){return new Intl.NumberFormat(navigator.language||"en-US",{style:"currency",currency:e.value.currency.toUpperCase(),maximumSignificantDigits:4}).format(r)}function d(r){return new Intl.NumberFormat(navigator.language||"en-US",{minimumFractionDigits:4,maximumFractionDigits:4}).format(r)}return(r,h)=>(x(),D(ye,null,[f("div",Ot,"Summary of staking rewards ("+C(o.value)+")",1),e.value?(x(),D("table",jt,[f("tr",null,[Lt,f("td",Et,C(d(e.value.summary.amount)+" "+e.value.token),1)]),f("tr",null,[Ut,f("td",Qt,C(d(n.value)+" "+e.value.token),1)]),f("tr",null,[zt,f("td",Bt,C(s(e.value.summary.value)),1)]),f("tr",null,[Mt,f("td",Kt,C(s(e.value.summary.valueNow)),1)]),f("tr",null,[Gt,f("td",Jt,C(i(e.value.currentPrice)),1)])])):S("",!0),e.value?(x(),D("div",Ht,[P(" Verify your rewards here: "),f("a",{href:`https://${e.value.chain}.subscan.io/account/${e.value.address}?tab=reward`,style:{"line-break":"anywhere"},target:"_blank"}," https://"+C(e.value.chain)+".subscan.io/account/"+C(e.value.address)+"?tab=reward ",9,Wt)])):S("",!0)],64))}});const Xt={class:"q-pa-md flex justify-center relative-position"},Zt={key:1,class:"absolute full-height flex justify-center items-center",style:{top:"0"}},ea=N({__name:"NominationPoolDropdown",setup(a){const t=U(),e=b([]),n=b(void 0),o=b(!1),s=b(!1),i=b(e.value),d=t.chain$.subscribe(u=>{s.value=!u||u.domain!=="kusama"&&u.domain!=="polkadot"}),r=t.nominationPools$.subscribe(u=>{u.pending?o.value=!0:o.value=!1,e.value=u.data||[],i.value=e.value,n.value=void 0});J(()=>{d.unsubscribe(),r.unsubscribe()});function h(u){t.nominationPoolId=u==null?void 0:u.pool_id}function k(u,c){if(u.trim()===""){c(()=>{i.value=e.value});return}c(()=>{const l=u.toLowerCase();i.value=e.value.filter(p=>p.metadata.toLowerCase().indexOf(l)>-1||p.pool_id===Number(l))})}const _=$(()=>{var u;return n.value?String((u=n.value)==null?void 0:u.metadata):"Nomination Pool"});return(u,c)=>(x(),D("div",Xt,[v(_e,{filled:"",onFilter:k,"use-input":"",modelValue:n.value,"onUpdate:modelValue":[c[0]||(c[0]=l=>n.value=l),h],label:_.value,options:i.value,"option-value":"pool_id","option-label":"pool_id",color:"teal",clearable:"",behavior:"dialog",disable:s.value||e.value.length===0,"options-selected-class":"text-deep-orange",style:{"max-width":"100%"}},{option:g(l=>[v(ie,he(we(l.itemProps)),{default:g(()=>[v(ue,null,{default:g(()=>[v(K,null,{default:g(()=>[P(C(l.opt.metadata)+" ("+C(l.opt.pool_id)+") ",1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","label","options","disable"]),s.value?(x(),H(st,{key:0,anchor:"top middle",self:"bottom middle",offset:[10,10],class:"text-body2"},{default:g(()=>[P(" Nomination pools are only supported for KSM and DOT ")]),_:1})):S("",!0),o.value?(x(),D("div",Zt,[v(Re,{color:"primary",size:"3em",thickness:2})])):S("",!0)]))}});var ta=Ae(ea,[["__scopeId","data-v-0ee707fb"]]);const aa={class:"q-my-md flex justify-between align-center items-center column-md row-lg row-xl column-xs column-sm"},na={class:"dropdown"},oa={class:"dropdown"},sa={class:"dropdown"},ra={key:0,class:"text-center q-my-xl"},la={key:1,class:"justify-around items-center column"},ia={key:2,class:"table q-my-md"},ua={key:3,class:"q-my-xl"},ca=f("div",{class:"text-h6 text-center"}," Export your staking rewards as CSV or JSON ",-1),da=f("div",{class:"text-h6 text-center q-mt-md"}," A wide range of substrate chains and fiat currencies are supported. ",-1),ma=f("div",{class:"text-h6 text-center"}," Select a network, a fiat currency, a time frame and enter your wallet address. Then press submit. ",-1),va=f("div",{class:"text-center q-my-md"}," This program returns the staking rewards earned as nominator. This software comes without warranty. Please verify the exported results ",-1),fa={class:"q-mx-auto text-center"},pa=["src"],ba=N({__name:"StakingRewards",setup(a){const t=Ee(),e=U(),n=b(void 0),o=b([]),s=b(void 0);e.chain$.pipe(Ue(1)).subscribe(u=>s.value=u);const i=e.rewards$.subscribe(async u=>{if(n.value=u.data,u.pending)t.loading.show({message:"Fetching staking rewards. This may take a while. Please be patient...",html:!0,boxClass:"bg-grey-2 text-grey-9",spinnerColor:"primary"});else if(u.error){t.loading.hide();const c=u.error,l=await c.text(),p=u.error.status&&(c.status===429||c.status===503)?"Too many requests. Please try again in some minutes":l||"There was an error fetching your data. Please try again later";t.dialog({title:c.status&&c.status===429?"Request limit exceeded":c.status&&c.status===503?"Server overloaded":"An error occurred",message:p,persistent:!0})}else t.loading.hide()}),d=e.chainList$.subscribe(u=>{o.value=u.chains.sort((c,l)=>c.label>l.label?1:-1)});J(()=>{i.unsubscribe(),d.unsubscribe()});function r(){k.value||e.fetchRewards()}function h(u){e.selectChain(u)}const k=$(()=>e.address.trim()===""||!e.currency||!s.value),_=b("img/dollar-4932316_1280.jpg");return(u,c)=>(x(),H(Qe,{class:"q-px-sm q-mx-auto content"},{default:g(()=>[f("div",aa,[f("div",na,[v(vt,{modelValue:s.value,"onUpdate:modelValue":[c[0]||(c[0]=l=>s.value=l),h],chains:o.value},null,8,["modelValue","chains"])]),f("div",oa,[v(ze,{modelValue:T(e).currency,"onUpdate:modelValue":c[1]||(c[1]=l=>T(e).currency=l)},null,8,["modelValue"])]),f("div",sa,[v(ta)]),v(At,{modelValue:T(e).timeFrame,"onUpdate:modelValue":c[2]||(c[2]=l=>T(e).timeFrame=l)},null,8,["modelValue"]),v(Be,{modelValue:T(e).address,"onUpdate:modelValue":c[3]||(c[3]=l=>T(e).address=l),onEnterPressed:r},null,8,["modelValue"]),v(B,{color:"primary",label:"Submit",onClick:r,disable:k.value},null,8,["disable"])]),n.value?(x(),D("div",ra,[v(Yt)])):S("",!0),n.value?(x(),D("div",la,[v(z,{currency:!1,chartType:"ColumnChart"}),v(z,{currency:!1,chartType:"LineChart"}),v(z,{currency:!0,chartType:"ColumnChart"}),v(z,{currency:!0,chartType:"LineChart"})])):S("",!0),n.value?(x(),D("div",ia,[v(It)])):S("",!0),n.value?S("",!0):(x(),D("div",ua,[ca,da,ma,va,f("div",fa,[f("img",{src:_.value,style:{"max-width":"40%"}},null,8,pa)])]))]),_:1}))}});export{ba as default};
